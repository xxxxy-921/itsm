{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/workbench/global-sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useEffect } from \"react\"\nimport Link from \"next/link\"\nimport {\n  Bot,\n  ChevronDown,\n  ChevronRight,\n  Home,\n  Wrench,\n  BookOpen,\n  Database,\n  BarChart3,\n  FileText,\n  Activity,\n  Users,\n  CreditCard,\n  Link2,\n  Bell,\n  FolderOpen,\n  Ticket,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\nconst menuItems = [\n  { icon: Home, label: \"工作台\", labelEn: \"Workspace\", href: \"/\", id: \"workspace\" },\n  { \n    icon: Wrench, \n    label: \"ITSM\", \n    labelEn: \"ITSM\", \n    href: \"#\", \n    id: \"itsm\",\n    hasSubmenu: true,\n    submenu: [\n      { label: \"服务目录\", href: \"/service-catalog\", id: \"service-catalog\" },\n      { label: \"工单\", href: \"/tickets\", id: \"tickets\" },\n    ]\n  },\n  { icon: BookOpen, label: \"知识库\", labelEn: \"Knowledge\", href: \"#\", id: \"knowledge\" },\n  { icon: Database, label: \"CMDB\", labelEn: \"CMDB\", href: \"#\", id: \"cmdb\" },\n  { icon: Bell, label: \"事件\", labelEn: \"Events\", href: \"#\", id: \"events\" },\n]\n\nconst analyticsItems = [\n  { icon: BarChart3, label: \"指标\", labelEn: \"Metrics\", href: \"#\", id: \"metrics\" },\n  { icon: FileText, label: \"日志\", labelEn: \"Logs\", href: \"#\", id: \"logs\" },\n  { icon: Activity, label: \"应用性能\", labelEn: \"Performance\", href: \"#\", id: \"performance\" },\n]\n\nconst settingsItems = [\n  { icon: Users, label: \"组织管理\", labelEn: \"Organization\", href: \"#\", id: \"org\", hasSubmenu: true },\n  { icon: CreditCard, label: \"成本与账单\", labelEn: \"Billing\", href: \"#\", id: \"billing\", hasSubmenu: true },\n  { icon: Link2, label: \"集成\", labelEn: \"Integrations\", href: \"#\", id: \"integrations\", hasSubmenu: true },\n]\n\ninterface GlobalSidebarProps {\n  currentPage?: string\n}\n\nexport function GlobalSidebar({ currentPage = \"workspace\" }: GlobalSidebarProps) {\n  const [hoveredItem, setHoveredItem] = useState<string | null>(null)\n  const [submenuPosition, setSubmenuPosition] = useState({ top: 0 })\n  const itemRefs = useRef<{ [key: string]: HTMLAnchorElement | null }>({})\n  const hideTimeoutRef = useRef<NodeJS.Timeout | null>(null)\n\n  // 清除隐藏定时器\n  const clearHideTimeout = () => {\n    if (hideTimeoutRef.current) {\n      clearTimeout(hideTimeoutRef.current)\n      hideTimeoutRef.current = null\n    }\n  }\n\n  // 显示悬浮菜单\n  const showSubmenu = (itemId: string) => {\n    clearHideTimeout()\n    setHoveredItem(itemId)\n  }\n\n  // 延迟隐藏悬浮菜单\n  const hideSubmenuWithDelay = () => {\n    clearHideTimeout()\n    hideTimeoutRef.current = setTimeout(() => {\n      setHoveredItem(null)\n    }, 300) // 300ms 延迟\n  }\n\n  // 组件卸载时清除定时器\n  useEffect(() => {\n    return () => clearHideTimeout()\n  }, [])\n\n  useEffect(() => {\n    if (hoveredItem && itemRefs.current[hoveredItem]) {\n      const rect = itemRefs.current[hoveredItem]!.getBoundingClientRect()\n      setSubmenuPosition({ top: rect.top })\n    }\n  }, [hoveredItem])\n\n  const renderMenuItem = (item: typeof menuItems[0], isActive: boolean) => {\n    const hasSubmenu = item.hasSubmenu && item.submenu\n\n    return (\n      <div\n        key={item.id}\n        className=\"relative\"\n        onMouseEnter={() => hasSubmenu && showSubmenu(item.id)}\n        onMouseLeave={() => hasSubmenu && hideSubmenuWithDelay()}\n      >\n        <Link\n          ref={(el) => { itemRefs.current[item.id] = el }}\n          href={item.href}\n          className={cn(\n            \"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 relative\",\n            isActive\n              ? \"bg-indigo-50 text-primary\"\n              : \"text-gray-500 hover:text-foreground hover:bg-gray-50\"\n          )}\n        >\n          {isActive && (\n            <span className=\"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-5 bg-primary rounded-r-full\" />\n          )}\n          <item.icon className=\"w-5 h-5\" />\n          <span>{item.label}</span>\n          {hasSubmenu && (\n            <ChevronRight className=\"w-4 h-4 ml-auto\" />\n          )}\n        </Link>\n\n        {/* 二级悬浮菜单 */}\n        {hasSubmenu && hoveredItem === item.id && (\n          <div \n            className=\"fixed left-[200px] z-50 animate-in fade-in slide-in-from-left-1 duration-100\"\n            style={{ top: submenuPosition.top }}\n            onMouseEnter={() => showSubmenu(item.id)}\n            onMouseLeave={() => hideSubmenuWithDelay()}\n          >\n            <div className=\"bg-white rounded-r-xl shadow-lg border border-l-0 border-gray-100 py-1 min-w-[140px]\">\n              {item.submenu?.map((subItem) => (\n                <Link\n                  key={subItem.id}\n                  href={subItem.href}\n                  className={cn(\n                    \"flex items-center gap-2 px-4 py-2.5 text-sm transition-colors\",\n                    currentPage === subItem.id\n                      ? \"bg-indigo-50 text-primary font-medium\"\n                      : \"text-gray-600 hover:bg-gray-50 hover:text-foreground\"\n                  )}\n                >\n                  {subItem.label}\n                </Link>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <aside className=\"w-[200px] h-screen bg-white border-r border-gray-100 flex flex-col fixed left-0 top-0 z-40\">\n      {/* Logo Header */}\n      <div className=\"h-16 px-5 flex items-center gap-3 border-b border-gray-50\">\n        <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-indigo-400 flex items-center justify-center\">\n          <Bot className=\"w-5 h-5 text-white\" />\n        </div>\n        <span className=\"font-semibold text-foreground tracking-tight\">BKLite Cloud</span>\n      </div>\n\n      {/* Navigation Menu */}\n      <nav className=\"flex-1 px-3 py-4 overflow-y-auto scrollbar-hide\">\n        <div className=\"space-y-1\">\n          {menuItems.map((item) => {\n            const isActive = currentPage === item.id || \n              (item.submenu?.some(sub => currentPage === sub.id))\n            return renderMenuItem(item, isActive)\n          })}\n        </div>\n\n        {/* Analytics Section */}\n        <div className=\"mt-6 pt-6 border-t border-gray-100\">\n          <div className=\"space-y-1\">\n            {analyticsItems.map((item) => (\n              <Link\n                key={item.id}\n                href={item.href}\n                className=\"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-gray-500 hover:text-foreground hover:bg-gray-50 transition-colors\"\n              >\n                <item.icon className=\"w-5 h-5\" />\n                <span>{item.label}</span>\n              </Link>\n            ))}\n          </div>\n        </div>\n\n        {/* Settings Section */}\n        <div className=\"mt-6 pt-6 border-t border-gray-100\">\n          <div className=\"space-y-1\">\n            {settingsItems.map((item) => (\n              <Link\n                key={item.id}\n                href={item.href}\n                className=\"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-gray-500 hover:text-foreground hover:bg-gray-50 transition-colors\"\n              >\n                <item.icon className=\"w-5 h-5\" />\n                <span>{item.label}</span>\n                {item.hasSubmenu && (\n                  <ChevronRight className=\"w-4 h-4 ml-auto\" />\n                )}\n              </Link>\n            ))}\n          </div>\n        </div>\n      </nav>\n\n      {/* User Profile */}\n      <div className=\"p-4 border-t border-gray-100\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-9 h-9 rounded-full bg-gradient-to-br from-primary to-violet-500 flex items-center justify-center text-white font-semibold text-sm\">\n            X\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium text-foreground truncate\">Xiaoyu Liu</p>\n            <p className=\"text-xs text-muted-foreground truncate\">umaru 的工作空间</p>\n          </div>\n        </div>\n      </div>\n    </aside>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 465, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/service-catalog/category-sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport {\n  RefreshCw,\n  Plus,\n  Edit2,\n  Trash2,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\n// Mock categories data - 中文化\nconst categoriesData = [\n  { id: \"hr\", name: \"人事服务\", code: \"hr-services\", count: 3, description: \"员工相关服务\", icon: \"\", enabled: true },\n  { id: \"office\", name: \"办公支持\", code: \"office-support\", count: 2, description: \"日常办公支持\", icon: \"\", enabled: true },\n  { id: \"assets\", name: \"设备与资产\", code: \"equipment-assets\", count: 4, description: \"设备资产管理\", icon: \"\", enabled: true },\n  { id: \"access\", name: \"账号与权限管理\", code: \"account-access\", count: 5, description: \"账号权限相关\", icon: \"\", enabled: true },\n]\n\ninterface CategorySidebarProps {\n  selectedCategory: string\n  onSelectCategory: (id: string) => void\n  onAddCategory: () => void\n  onEditCategory: (category: any) => void\n  onDeleteCategory: (id: string) => void\n}\n\nexport function CategorySidebar({ \n  selectedCategory, \n  onSelectCategory, \n  onAddCategory,\n  onEditCategory,\n  onDeleteCategory\n}: CategorySidebarProps) {\n  const [hoveredId, setHoveredId] = useState<string | null>(null)\n  const [deleteConfirmId, setDeleteConfirmId] = useState<string | null>(null)\n\n  const handleEdit = (e: React.MouseEvent, category: any) => {\n    e.stopPropagation()\n    onEditCategory(category)\n  }\n\n  const handleDeleteClick = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation()\n    setDeleteConfirmId(id)\n  }\n\n  const handleDeleteConfirm = () => {\n    if (deleteConfirmId) {\n      onDeleteCategory(deleteConfirmId)\n      setDeleteConfirmId(null)\n    }\n  }\n\n  return (\n    <aside className=\"w-full h-full bg-white border-r border-gray-100 flex flex-col\">\n      {/* Header */}\n      <div className=\"px-5 py-4 border-b border-gray-100\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-base font-semibold text-foreground\">服务目录</h2>\n            <p className=\"text-xs text-muted-foreground mt-0.5\">{categoriesData.length} 个目录</p>\n          </div>\n          <div className=\"flex items-center gap-1\">\n            <button\n              type=\"button\"\n              className=\"w-8 h-8 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-all\"\n            >\n              <RefreshCw className=\"w-4 h-4\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={onAddCategory}\n              className=\"w-8 h-8 rounded-lg flex items-center justify-center bg-indigo-600 text-white hover:bg-indigo-700 shadow-sm shadow-indigo-500/30 transition-all\"\n            >\n              <Plus className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Category List */}\n      <nav className=\"flex-1 p-3 overflow-y-auto\">\n        <div className=\"space-y-1\">\n          {categoriesData.map((category) => {\n            const isActive = selectedCategory === category.id\n            const isHovered = hoveredId === category.id\n            \n            return (\n              <div \n                key={category.id} \n                className=\"relative\"\n                onMouseEnter={() => setHoveredId(category.id)}\n                onMouseLeave={() => setHoveredId(null)}\n              >\n                <div className=\"relative\">\n                  <button\n                    type=\"button\"\n                    onClick={() => onSelectCategory(category.id)}\n                    className={cn(\n                      \"w-full flex items-center justify-between px-4 py-3 rounded-xl text-left transition-all duration-200\",\n                      isActive\n                        ? \"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200\"\n                        : \"hover:bg-gray-50 border border-transparent\"\n                    )}\n                  >\n                    <div className=\"flex-1 min-w-0\">\n                      <span className={cn(\n                        \"text-sm font-medium block truncate\",\n                        isActive ? \"text-indigo-700\" : \"text-gray-700\"\n                      )}>\n                        {category.name}\n                      </span>\n                      <span className=\"text-xs text-muted-foreground mt-0.5 block truncate\">\n                        {category.code}\n                      </span>\n                    </div>\n                  </button>\n\n                  {/* 编辑和删除按钮 - 悬停时显示 */}\n                  {isHovered && (\n                    <div className=\"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-1 animate-in fade-in slide-in-from-right-2 duration-200\">\n                      <button\n                        type=\"button\"\n                        onClick={(e) => handleEdit(e, category)}\n                        className=\"w-7 h-7 rounded-lg flex items-center justify-center text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 transition-all\"\n                        title=\"编辑\"\n                      >\n                        <Edit2 className=\"w-4 h-4\" />\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={(e) => handleDeleteClick(e, category.id)}\n                        className=\"w-7 h-7 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 transition-all\"\n                        title=\"删除\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      </nav>\n\n      {/* Delete Confirmation Modal */}\n      {deleteConfirmId && (\n        <>\n          <div \n            className=\"fixed inset-0 bg-black/50 z-40 animate-in fade-in duration-200\"\n            onClick={() => setDeleteConfirmId(null)}\n          />\n          <div className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 w-full max-w-md p-6 bg-white rounded-2xl shadow-2xl animate-in zoom-in-95 fade-in duration-200\">\n            <div className=\"text-center\">\n              <div className=\"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4\">\n                <Trash2 className=\"w-6 h-6 text-red-600\" />\n              </div>\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                确定要删除该目录吗？\n              </h3>\n              <p className=\"text-sm text-gray-500 mb-6\">\n                删除后将无法恢复，该目录下的服务将被移除\n              </p>\n              <div className=\"flex items-center gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setDeleteConfirmId(null)}\n                  className=\"flex-1 px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-gray-600 hover:bg-gray-50 transition-all\"\n                >\n                  取消\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleDeleteConfirm}\n                  className=\"flex-1 px-4 py-2.5 rounded-xl bg-red-600 text-sm font-medium text-white hover:bg-red-700 transition-all\"\n                >\n                  确认删除\n                </button>\n              </div>\n            </div>\n          </div>\n        </>\n      )}\n    </aside>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 834, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,4SAAI,GAAG;IAE9B,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 893, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/ui/alert-dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as AlertDialogPrimitive from '@radix-ui/react-alert-dialog'\n\nimport { cn } from '@/lib/utils'\nimport { buttonVariants } from '@/components/ui/button'\n\nfunction AlertDialog({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {\n  return <AlertDialogPrimitive.Root data-slot=\"alert-dialog\" {...props} />\n}\n\nfunction AlertDialogTrigger({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {\n  return (\n    <AlertDialogPrimitive.Trigger data-slot=\"alert-dialog-trigger\" {...props} />\n  )\n}\n\nfunction AlertDialogPortal({\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {\n  return (\n    <AlertDialogPrimitive.Portal data-slot=\"alert-dialog-portal\" {...props} />\n  )\n}\n\nfunction AlertDialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {\n  return (\n    <AlertDialogPrimitive.Overlay\n      data-slot=\"alert-dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {\n  return (\n    <AlertDialogPortal>\n      <AlertDialogOverlay />\n      <AlertDialogPrimitive.Content\n        data-slot=\"alert-dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      />\n    </AlertDialogPortal>\n  )\n}\n\nfunction AlertDialogHeader({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogFooter({\n  className,\n  ...props\n}: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"alert-dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {\n  return (\n    <AlertDialogPrimitive.Title\n      data-slot=\"alert-dialog-title\"\n      className={cn('text-lg font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {\n  return (\n    <AlertDialogPrimitive.Description\n      data-slot=\"alert-dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogAction({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {\n  return (\n    <AlertDialogPrimitive.Action\n      className={cn(buttonVariants(), className)}\n      {...props}\n    />\n  )\n}\n\nfunction AlertDialogCancel({\n  className,\n  ...props\n}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {\n  return (\n    <AlertDialogPrimitive.Cancel\n      className={cn(buttonVariants({ variant: 'outline' }), className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAEA;AACA;AANA;;;;;AAQA,SAAS,YAAY,EACnB,GAAG,OACoD;IACvD,qBAAO,8WAAC,0RAAyB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,mBAAmB,EAC1B,GAAG,OACuD;IAC1D,qBACE,8WAAC,6RAA4B;QAAC,aAAU;QAAwB,GAAG,KAAK;;;;;;AAE5E;AAEA,SAAS,kBAAkB,EACzB,GAAG,OACsD;IACzD,qBACE,8WAAC,4RAA2B;QAAC,aAAU;QAAuB,GAAG,KAAK;;;;;;AAE1E;AAEA,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,8WAAC,6RAA4B;QAC3B,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,mBAAmB,EAC1B,SAAS,EACT,GAAG,OACuD;IAC1D,qBACE,8WAAC;;0BACC,8WAAC;;;;;0BACD,8WAAC,6RAA4B;gBAC3B,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;;;;;;;;;;;AAIjB;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,8WAAC,2RAA0B;QACzB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,yBAAyB;QACtC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,uBAAuB,EAC9B,SAAS,EACT,GAAG,OAC2D;IAC9D,qBACE,8WAAC,iSAAgC;QAC/B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8WAAC,4RAA2B;QAC1B,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,KAAI;QAC/B,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8WAAC,4RAA2B;QAC1B,WAAW,IAAA,kHAAE,EAAC,IAAA,6IAAc,EAAC;YAAE,SAAS;QAAU,IAAI;QACrD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1062, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/service-catalog/service-card.tsx"],"sourcesContent":["\"use client\"\n\nimport React, { useState } from \"react\"\nimport { Pencil, Trash2 } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\"\n\ninterface Service {\n  id: string\n  title: string\n  code: string\n  description: string\n  icon: React.ElementType\n  status: \"active\" | \"draft\"\n  sla: string\n  category: string\n  categoryName?: string\n}\n\ninterface ServiceCardProps {\n  service: Service\n  onEdit?: () => void\n  onDelete?: () => void\n}\n\nexport function ServiceCard({ service, onEdit, onDelete }: ServiceCardProps) {\n  const Icon = service.icon\n  const [showDisableAlert, setShowDisableAlert] = useState(false)\n\n  const handleDelete = (e: React.MouseEvent) => {\n    e.stopPropagation()\n    if (service.status === \"active\") {\n      // 启用状态的服务需要先停用\n      setShowDisableAlert(true)\n    } else {\n      onDelete?.()\n    }\n  }\n\n  const handleEdit = (e: React.MouseEvent) => {\n    e.stopPropagation()\n    onEdit?.()\n  }\n\n  return (\n    <>\n      <div\n        className={cn(\n          \"group relative bg-white rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden cursor-pointer\",\n          service.status === \"active\"\n            ? \"border border-indigo-200 shadow-indigo-500/10 hover:border-indigo-300 hover:shadow-indigo-500/20\"\n            : \"border border-gray-100 hover:border-indigo-100\"\n        )}\n      >\n        {/* 悬停遮罩层 */}\n        <div className=\"absolute inset-0 bg-white/60 backdrop-blur-[2px] opacity-0 group-hover:opacity-100 transition-all duration-300 z-10 flex items-center justify-center gap-4\">\n          <button\n            onClick={handleEdit}\n            className=\"w-11 h-11 rounded-xl bg-white border border-gray-200 shadow-lg flex items-center justify-center text-gray-600 hover:text-indigo-600 hover:border-indigo-200 hover:bg-indigo-50 transition-all duration-200 transform hover:scale-105\"\n          >\n            <Pencil className=\"w-5 h-5\" />\n          </button>\n          <button\n            onClick={handleDelete}\n            className=\"w-11 h-11 rounded-xl bg-white border border-gray-200 shadow-lg flex items-center justify-center text-gray-600 hover:text-red-500 hover:border-red-200 hover:bg-red-50 transition-all duration-200 transform hover:scale-105\"\n          >\n            <Trash2 className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        <div className=\"p-5\">\n          {/* Header */}\n          <div className=\"flex items-start gap-4\">\n            <div className=\"w-11 h-11 rounded-xl bg-gray-50 border border-gray-100 flex items-center justify-center text-gray-400 flex-shrink-0\">\n              <Icon className=\"w-5 h-5\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-start justify-between gap-2\">\n                <h3 className={cn(\n                  \"text-sm font-semibold transition-colors\",\n                  service.status === \"active\"\n                    ? \"text-indigo-600 group-hover:text-indigo-700\"\n                    : \"text-foreground group-hover:text-primary\"\n                )}>\n                  {service.title}\n                </h3>\n                <span\n                  className={cn(\n                    \"flex items-center gap-1.5 px-2 py-0.5 rounded text-xs font-medium flex-shrink-0\",\n                    service.status === \"active\"\n                      ? \"text-emerald-600\"\n                      : \"text-gray-500\"\n                  )}\n                >\n                  <span className={cn(\n                    \"w-1.5 h-1.5 rounded-full\",\n                    service.status === \"active\" ? \"bg-emerald-500\" : \"bg-gray-400\"\n                  )} />\n                  {service.status === \"active\" ? \"启用\" : \"停用\"}\n                </span>\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-0.5 font-mono\">\n                {service.code}\n              </p>\n            </div>\n          </div>\n\n          {/* Description */}\n          <p className=\"text-sm text-muted-foreground mt-3 line-clamp-2\">\n            {service.description}\n          </p>\n\n          {/* Footer */}\n          <div className=\"flex items-center gap-4 mt-4 pt-3 border-t border-gray-50\">\n            <span className=\"text-xs text-muted-foreground\">\n              {service.categoryName || \"人事服务\"}\n            </span>\n            <span className=\"text-xs text-muted-foreground\">·</span>\n            <span className=\"text-xs text-muted-foreground\">\n              SLA {service.sla}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* 删除启用服务的提示弹窗 */}\n      <AlertDialog open={showDisableAlert} onOpenChange={setShowDisableAlert}>\n        <AlertDialogContent className=\"rounded-2xl\">\n          <AlertDialogHeader>\n            <AlertDialogTitle>无法删除启用中的服务</AlertDialogTitle>\n            <AlertDialogDescription>\n              该服务当前处于启用状态，请先停用该服务后再进行删除操作。\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel className=\"rounded-xl\">知道了</AlertDialogCancel>\n            <AlertDialogAction \n              onClick={() => {\n                setShowDisableAlert(false)\n                onEdit?.()\n              }}\n              className=\"rounded-xl bg-indigo-600 hover:bg-indigo-700\"\n            >\n              去停用\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AALA;;;;;;AAkCO,SAAS,YAAY,EAAE,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAoB;IACzE,MAAM,OAAO,QAAQ,IAAI;IACzB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iVAAQ,EAAC;IAEzD,MAAM,eAAe,CAAC;QACpB,EAAE,eAAe;QACjB,IAAI,QAAQ,MAAM,KAAK,UAAU;YAC/B,eAAe;YACf,oBAAoB;QACtB,OAAO;YACL;QACF;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,EAAE,eAAe;QACjB;IACF;IAEA,qBACE;;0BACE,8WAAC;gBACC,WAAW,IAAA,kHAAE,EACX,4HACA,QAAQ,MAAM,KAAK,WACf,qGACA;;kCAIN,8WAAC;wBAAI,WAAU;;0CACb,8WAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8WAAC,oSAAM;oCAAC,WAAU;;;;;;;;;;;0CAEpB,8WAAC;gCACC,SAAS;gCACT,WAAU;0CAEV,cAAA,8WAAC,wSAAM;oCAAC,WAAU;;;;;;;;;;;;;;;;;kCAItB,8WAAC;wBAAI,WAAU;;0CAEb,8WAAC;gCAAI,WAAU;;kDACb,8WAAC;wCAAI,WAAU;kDACb,cAAA,8WAAC;4CAAK,WAAU;;;;;;;;;;;kDAElB,8WAAC;wCAAI,WAAU;;0DACb,8WAAC;gDAAI,WAAU;;kEACb,8WAAC;wDAAG,WAAW,IAAA,kHAAE,EACf,2CACA,QAAQ,MAAM,KAAK,WACf,gDACA;kEAEH,QAAQ,KAAK;;;;;;kEAEhB,8WAAC;wDACC,WAAW,IAAA,kHAAE,EACX,mFACA,QAAQ,MAAM,KAAK,WACf,qBACA;;0EAGN,8WAAC;gEAAK,WAAW,IAAA,kHAAE,EACjB,4BACA,QAAQ,MAAM,KAAK,WAAW,mBAAmB;;;;;;4DAElD,QAAQ,MAAM,KAAK,WAAW,OAAO;;;;;;;;;;;;;0DAG1C,8WAAC;gDAAE,WAAU;0DACV,QAAQ,IAAI;;;;;;;;;;;;;;;;;;0CAMnB,8WAAC;gCAAE,WAAU;0CACV,QAAQ,WAAW;;;;;;0CAItB,8WAAC;gCAAI,WAAU;;kDACb,8WAAC;wCAAK,WAAU;kDACb,QAAQ,YAAY,IAAI;;;;;;kDAE3B,8WAAC;wCAAK,WAAU;kDAAgC;;;;;;kDAChD,8WAAC;wCAAK,WAAU;;4CAAgC;4CACzC,QAAQ,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;0BAOxB,8WAAC,mJAAW;gBAAC,MAAM;gBAAkB,cAAc;0BACjD,cAAA,8WAAC,0JAAkB;oBAAC,WAAU;;sCAC5B,8WAAC,yJAAiB;;8CAChB,8WAAC,wJAAgB;8CAAC;;;;;;8CAClB,8WAAC,8JAAsB;8CAAC;;;;;;;;;;;;sCAI1B,8WAAC,yJAAiB;;8CAChB,8WAAC,yJAAiB;oCAAC,WAAU;8CAAa;;;;;;8CAC1C,8WAAC,yJAAiB;oCAChB,SAAS;wCACP,oBAAoB;wCACpB;oCACF;oCACA,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}},
    {"offset": {"line": 1345, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/ui/sheet.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SheetPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {\n  return <SheetPrimitive.Root data-slot=\"sheet\" {...props} />\n}\n\nfunction SheetTrigger({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {\n  return <SheetPrimitive.Trigger data-slot=\"sheet-trigger\" {...props} />\n}\n\nfunction SheetClose({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Close>) {\n  return <SheetPrimitive.Close data-slot=\"sheet-close\" {...props} />\n}\n\nfunction SheetPortal({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Portal>) {\n  return <SheetPrimitive.Portal data-slot=\"sheet-portal\" {...props} />\n}\n\nfunction SheetOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {\n  return (\n    <SheetPrimitive.Overlay\n      data-slot=\"sheet-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SheetContent({\n  className,\n  children,\n  side = 'right',\n  showClose = true,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Content> & {\n  side?: 'top' | 'right' | 'bottom' | 'left'\n  showClose?: boolean\n}) {\n  return (\n    <SheetPortal>\n      <SheetOverlay />\n      <SheetPrimitive.Content\n        data-slot=\"sheet-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500',\n          side === 'right' &&\n            'data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm',\n          side === 'left' &&\n            'data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm',\n          side === 'top' &&\n            'data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b',\n          side === 'bottom' &&\n            'data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showClose && (\n          <SheetPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none\">\n            <XIcon className=\"size-4\" />\n            <span className=\"sr-only\">Close</span>\n          </SheetPrimitive.Close>\n        )}\n      </SheetPrimitive.Content>\n    </SheetPortal>\n  )\n}\n\nfunction SheetHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sheet-header\"\n      className={cn('flex flex-col gap-1.5 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"sheet-footer\"\n      className={cn('mt-auto flex flex-col gap-2 p-4', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Title>) {\n  return (\n    <SheetPrimitive.Title\n      data-slot=\"sheet-title\"\n      className={cn('text-foreground font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Description>) {\n  return (\n    <SheetPrimitive.Description\n      data-slot=\"sheet-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sheet,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,MAAM,EAAE,GAAG,OAAyD;IAC3E,qBAAO,8WAAC,uRAAmB;QAAC,aAAU;QAAS,GAAG,KAAK;;;;;;AACzD;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8WAAC,0RAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,WAAW,EAClB,GAAG,OAC+C;IAClD,qBAAO,8WAAC,wRAAoB;QAAC,aAAU;QAAe,GAAG,KAAK;;;;;;AAChE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8WAAC,yRAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,8WAAC,0RAAsB;QACrB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,QAAQ,EACR,OAAO,OAAO,EACd,YAAY,IAAI,EAChB,GAAG,OAIJ;IACC,qBACE,8WAAC;;0BACC,8WAAC;;;;;0BACD,8WAAC,0RAAsB;gBACrB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,8MACA,SAAS,WACP,oIACF,SAAS,UACP,iIACF,SAAS,SACP,4GACF,SAAS,YACP,qHACF;gBAED,GAAG,KAAK;;oBAER;oBACA,2BACC,8WAAC,wRAAoB;wBAAC,WAAU;;0CAC9B,8WAAC,6RAAK;gCAAC,WAAU;;;;;;0CACjB,8WAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6BAA6B;QAC1C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,8WAAC,wRAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,8WAAC,8RAA0B;QACzB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1523, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/service-catalog/mermaid-viewer.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport mermaid from \"mermaid\"\r\n\r\ninterface MermaidViewerProps {\r\n  chart: string\r\n  className?: string\r\n}\r\n\r\nexport function MermaidViewer({ chart, className = \"\" }: MermaidViewerProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    mermaid.initialize({\r\n      startOnLoad: true,\r\n      theme: \"default\",\r\n      securityLevel: \"loose\",\r\n      fontFamily: \"ui-sans-serif, system-ui, sans-serif\",\r\n      flowchart: {\r\n        useMaxWidth: true,\r\n        htmlLabels: true,\r\n        curve: \"basis\",\r\n      },\r\n    })\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    if (!containerRef.current || !chart) return\r\n\r\n    const renderChart = async () => {\r\n      try {\r\n        setError(null)\r\n        const uniqueId = `mermaid-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`\r\n        const { svg } = await mermaid.render(uniqueId, chart)\r\n        if (containerRef.current) {\r\n          containerRef.current.innerHTML = svg\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Mermaid render error:\", err)\r\n        setError(\"流程图渲染失败，请检查文本格式\")\r\n      }\r\n    }\r\n\r\n    renderChart()\r\n  }, [chart])\r\n\r\n  if (error) {\r\n    return (\r\n      <div className={`flex items-center justify-center p-8 rounded-xl bg-red-50 border border-red-200 ${className}`}>\r\n        <p className=\"text-sm text-red-600\">{error}</p>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return <div ref={containerRef} className={className} />\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUO,SAAS,cAAc,EAAE,KAAK,EAAE,YAAY,EAAE,EAAsB;IACzE,MAAM,eAAe,IAAA,+UAAM,EAAiB;IAC5C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iVAAQ,EAAgB;IAElD,IAAA,kVAAS,EAAC;QACR,oNAAO,CAAC,UAAU,CAAC;YACjB,aAAa;YACb,OAAO;YACP,eAAe;YACf,YAAY;YACZ,WAAW;gBACT,aAAa;gBACb,YAAY;gBACZ,OAAO;YACT;QACF;IACF,GAAG,EAAE;IAEL,IAAA,kVAAS,EAAC;QACR,IAAI,CAAC,aAAa,OAAO,IAAI,CAAC,OAAO;QAErC,MAAM,cAAc;YAClB,IAAI;gBACF,SAAS;gBACT,MAAM,WAAW,CAAC,QAAQ,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;gBACnF,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,oNAAO,CAAC,MAAM,CAAC,UAAU;gBAC/C,IAAI,aAAa,OAAO,EAAE;oBACxB,aAAa,OAAO,CAAC,SAAS,GAAG;gBACnC;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;gBACvC,SAAS;YACX;QACF;QAEA;IACF,GAAG;QAAC;KAAM;IAEV,IAAI,OAAO;QACT,qBACE,8WAAC;YAAI,WAAW,CAAC,gFAAgF,EAAE,WAAW;sBAC5G,cAAA,8WAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;IAG3C;IAEA,qBAAO,8WAAC;QAAI,KAAK;QAAc,WAAW;;;;;;AAC5C"}},
    {"offset": {"line": 1599, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/lib/cot-to-mermaid.ts"],"sourcesContent":["/**\r\n * 将 Agent CoT 指令文本转换为 Mermaid 流程图\r\n */\r\nexport function convertCotToMermaid(cotText: string): string {\r\n  if (!cotText || !cotText.trim()) {\r\n    return `graph TD\r\n    A[开始] --> B[暂无流程]\r\n    B --> C[结束]`\r\n  }\r\n\r\n  try {\r\n    // 提取 Phase 阶段\r\n    const phaseRegex = /(?:Phase\\s+\\d+|步骤\\s*\\d+|阶段\\s*\\d+)\\s*[-–—]\\s*([^：:]+)[:：]?\\s*([\\s\\S]*?)(?=(?:Phase\\s+\\d+|步骤\\s*\\d+|阶段\\s*\\d+|$))/gi\r\n    const phases: Array<{ title: string; content: string }> = []\r\n    \r\n    let match\r\n    while ((match = phaseRegex.exec(cotText)) !== null) {\r\n      phases.push({\r\n        title: match[1].trim(),\r\n        content: match[2].trim(),\r\n      })\r\n    }\r\n\r\n    if (phases.length === 0) {\r\n      // 如果没有找到明确的 Phase，尝试按段落分割\r\n      const paragraphs = cotText.split(/\\n\\n+/).filter(p => p.trim())\r\n      if (paragraphs.length > 0) {\r\n        paragraphs.forEach((para, idx) => {\r\n          const lines = para.split('\\n').filter(l => l.trim())\r\n          if (lines.length > 0) {\r\n            phases.push({\r\n              title: `步骤 ${idx + 1}`,\r\n              content: lines.join('\\n'),\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    // 生成 Mermaid 流程图\r\n    let mermaidCode = `graph TD\\n`\r\n    mermaidCode += `    Start([开始]) --> Phase1\\n`\r\n\r\n    phases.forEach((phase, index) => {\r\n      const nodeId = `Phase${index + 1}`\r\n      const nextNodeId = index < phases.length - 1 ? `Phase${index + 2}` : 'End'\r\n      \r\n      // 清理标题，移除特殊字符\r\n      const cleanTitle = phase.title\r\n        .replace(/[\"\\[\\]{}()]/g, '')\r\n        .substring(0, 30)\r\n      \r\n      mermaidCode += `    ${nodeId}[\"${cleanTitle}\"]\\n`\r\n      \r\n      // 提取子步骤\r\n      const subSteps = extractSubSteps(phase.content)\r\n      if (subSteps.length > 0) {\r\n        subSteps.forEach((step, subIdx) => {\r\n          const subNodeId = `${nodeId}_${subIdx + 1}`\r\n          const cleanStep = step\r\n            .replace(/[\"\\[\\]{}()]/g, '')\r\n            .substring(0, 40)\r\n          mermaidCode += `    ${subNodeId}[\"${cleanStep}\"]\\n`\r\n          \r\n          if (subIdx === 0) {\r\n            mermaidCode += `    ${nodeId} --> ${subNodeId}\\n`\r\n          } else {\r\n            mermaidCode += `    ${nodeId}_${subIdx} --> ${subNodeId}\\n`\r\n          }\r\n          \r\n          if (subIdx === subSteps.length - 1) {\r\n            mermaidCode += `    ${subNodeId} --> ${nextNodeId}\\n`\r\n          }\r\n        })\r\n      } else {\r\n        mermaidCode += `    ${nodeId} --> ${nextNodeId}\\n`\r\n      }\r\n    })\r\n\r\n    mermaidCode += `    End([结束])\\n`\r\n\r\n    return mermaidCode\r\n  } catch (error) {\r\n    console.error('Convert CoT to Mermaid error:', error)\r\n    return `graph TD\r\n    A[开始] --> B[解析失败]\r\n    B --> C[请检查文本格式]\r\n    C --> D[结束]`\r\n  }\r\n}\r\n\r\n/**\r\n * 提取子步骤\r\n */\r\nfunction extractSubSteps(content: string): string[] {\r\n  const steps: string[] = []\r\n  \r\n  // 匹配带序号的行，如 \"1. \", \"- \", \"• \" 等\r\n  const stepRegex = /(?:^|\\n)\\s*(?:[-•]\\s*|[\\d]+\\.\\s*)(.+)/g\r\n  \r\n  let match\r\n  while ((match = stepRegex.exec(content)) !== null) {\r\n    const step = match[1].trim()\r\n    if (step && step.length > 0) {\r\n      steps.push(step)\r\n    }\r\n  }\r\n  \r\n  return steps.slice(0, 5) // 最多提取5个子步骤\r\n}\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AACM,SAAS,oBAAoB,OAAe;IACjD,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,IAAI;QAC/B,OAAO,CAAC;;eAEG,CAAC;IACd;IAEA,IAAI;QACF,cAAc;QACd,MAAM,aAAa;QACnB,MAAM,SAAoD,EAAE;QAE5D,IAAI;QACJ,MAAO,CAAC,QAAQ,WAAW,IAAI,CAAC,QAAQ,MAAM,KAAM;YAClD,OAAO,IAAI,CAAC;gBACV,OAAO,KAAK,CAAC,EAAE,CAAC,IAAI;gBACpB,SAAS,KAAK,CAAC,EAAE,CAAC,IAAI;YACxB;QACF;QAEA,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,0BAA0B;YAC1B,MAAM,aAAa,QAAQ,KAAK,CAAC,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI;YAC5D,IAAI,WAAW,MAAM,GAAG,GAAG;gBACzB,WAAW,OAAO,CAAC,CAAC,MAAM;oBACxB,MAAM,QAAQ,KAAK,KAAK,CAAC,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,IAAI;oBACjD,IAAI,MAAM,MAAM,GAAG,GAAG;wBACpB,OAAO,IAAI,CAAC;4BACV,OAAO,CAAC,GAAG,EAAE,MAAM,GAAG;4BACtB,SAAS,MAAM,IAAI,CAAC;wBACtB;oBACF;gBACF;YACF;QACF;QAEA,iBAAiB;QACjB,IAAI,cAAc,CAAC,UAAU,CAAC;QAC9B,eAAe,CAAC,4BAA4B,CAAC;QAE7C,OAAO,OAAO,CAAC,CAAC,OAAO;YACrB,MAAM,SAAS,CAAC,KAAK,EAAE,QAAQ,GAAG;YAClC,MAAM,aAAa,QAAQ,OAAO,MAAM,GAAG,IAAI,CAAC,KAAK,EAAE,QAAQ,GAAG,GAAG;YAErE,cAAc;YACd,MAAM,aAAa,MAAM,KAAK,CAC3B,OAAO,CAAC,gBAAgB,IACxB,SAAS,CAAC,GAAG;YAEhB,eAAe,CAAC,IAAI,EAAE,OAAO,EAAE,EAAE,WAAW,IAAI,CAAC;YAEjD,QAAQ;YACR,MAAM,WAAW,gBAAgB,MAAM,OAAO;YAC9C,IAAI,SAAS,MAAM,GAAG,GAAG;gBACvB,SAAS,OAAO,CAAC,CAAC,MAAM;oBACtB,MAAM,YAAY,GAAG,OAAO,CAAC,EAAE,SAAS,GAAG;oBAC3C,MAAM,YAAY,KACf,OAAO,CAAC,gBAAgB,IACxB,SAAS,CAAC,GAAG;oBAChB,eAAe,CAAC,IAAI,EAAE,UAAU,EAAE,EAAE,UAAU,IAAI,CAAC;oBAEnD,IAAI,WAAW,GAAG;wBAChB,eAAe,CAAC,IAAI,EAAE,OAAO,KAAK,EAAE,UAAU,EAAE,CAAC;oBACnD,OAAO;wBACL,eAAe,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,OAAO,KAAK,EAAE,UAAU,EAAE,CAAC;oBAC7D;oBAEA,IAAI,WAAW,SAAS,MAAM,GAAG,GAAG;wBAClC,eAAe,CAAC,IAAI,EAAE,UAAU,KAAK,EAAE,WAAW,EAAE,CAAC;oBACvD;gBACF;YACF,OAAO;gBACL,eAAe,CAAC,IAAI,EAAE,OAAO,KAAK,EAAE,WAAW,EAAE,CAAC;YACpD;QACF;QAEA,eAAe,CAAC,eAAe,CAAC;QAEhC,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,CAAC;;;eAGG,CAAC;IACd;AACF;AAEA;;CAEC,GACD,SAAS,gBAAgB,OAAe;IACtC,MAAM,QAAkB,EAAE;IAE1B,gCAAgC;IAChC,MAAM,YAAY;IAElB,IAAI;IACJ,MAAO,CAAC,QAAQ,UAAU,IAAI,CAAC,QAAQ,MAAM,KAAM;QACjD,MAAM,OAAO,KAAK,CAAC,EAAE,CAAC,IAAI;QAC1B,IAAI,QAAQ,KAAK,MAAM,GAAG,GAAG;YAC3B,MAAM,IAAI,CAAC;QACb;IACF;IAEA,OAAO,MAAM,KAAK,CAAC,GAAG,GAAG,YAAY;;AACvC"}},
    {"offset": {"line": 1696, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/service-catalog/create-service-drawer.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport {\r\n  X,\r\n  Wand2,\r\n  Bold,\r\n  Italic,\r\n  Link,\r\n  List,\r\n  ChevronDown,\r\n  Sparkles,\r\n  Clock,\r\n  Plus,\r\n  FileText,\r\n  Trash2,\r\n  Upload,\r\n  Cloud,\r\n  Paperclip,\r\n  FileUp,\r\n  Loader2,\r\n  CheckCircle2,\r\n  Brain,\r\n  AlertTriangle,\r\n} from \"lucide-react\"\r\nimport {\r\n  Sheet,\r\n  SheetContent,\r\n  SheetTitle,\r\n} from \"@/components/ui/sheet\"\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\"\r\nimport { MermaidViewer } from \"./mermaid-viewer\"\r\nimport { convertCotToMermaid } from \"@/lib/cot-to-mermaid\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\n// Skills 和 MCP 类型定义\r\ninterface Skill {\r\n  id: string\r\n  name: string\r\n  description: string\r\n  category: string\r\n}\r\n\r\ninterface MCPServer {\r\n  id: string\r\n  name: string\r\n  description: string\r\n  protocol: string\r\n}\r\n\r\ninterface CreateServiceDrawerProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  mode?: \"create\" | \"edit\"\r\n  editingService?: {\r\n    id: string\r\n    title: string\r\n    code: string\r\n    description: string\r\n    category: string\r\n    sla: string\r\n    icon?: string\r\n    collaborationRules?: string\r\n    infoCollectionPrompt?: string\r\n    agentModel?: string\r\n    uploadedDocument?: {\r\n      name: string\r\n      uploadedAt: string\r\n    }\r\n  } | null\r\n}\r\n\r\n// Mock categories for dropdown\r\nconst categories = [\r\n  { id: \"hr\", label: \"人事服务\" },\r\n  { id: \"office\", label: \"办公支持\" },\r\n  { id: \"assets\", label: \"设备与资产\" },\r\n  { id: \"access\", label: \"账号与权限管理\" },\r\n]\r\n\r\n// Mock 可用的 Skills 列表\r\nconst AVAILABLE_SKILLS: Skill[] = [\r\n  { id: \"skill-1\", name: \"check_leave_balance\", description: \"查询员工的年假余额\", category: \"hr\" },\r\n  { id: \"skill-2\", name: \"submit_leave_request\", description: \"提交请假申请到审批流程\", category: \"hr\" },\r\n  { id: \"skill-3\", name: \"query_approval_status\", description: \"查询审批状态\", category: \"hr\" },\r\n  { id: \"skill-4\", name: \"send_notification\", description: \"发送通知给相关人员\", category: \"office\" },\r\n  { id: \"skill-5\", name: \"create_calendar_event\", description: \"创建日历事件\", category: \"office\" },\r\n]\r\n\r\n// Mock 可用的 MCP Servers 列表\r\nconst AVAILABLE_MCP_SERVERS: MCPServer[] = [\r\n  { id: \"mcp-1\", name: \"HR System MCP\", description: \"连接 HR 系统的 MCP 服务\", protocol: \"stdio\" },\r\n  { id: \"mcp-2\", name: \"Calendar MCP\", description: \"日历系统集成\", protocol: \"http\" },\r\n  { id: \"mcp-3\", name: \"Notification MCP\", description: \"通知服务\", protocol: \"stdio\" },\r\n]\r\n\r\n// Mock Agent 模型列表\r\nconst AGENT_MODELS = [\r\n  { id: \"gpt-4\", name: \"GPT-4\", description: \"强大的通用模型\" },\r\n  { id: \"gpt-3.5-turbo\", name: \"GPT-3.5 Turbo\", description: \"快速响应模型\" },\r\n  { id: \"claude-3\", name: \"Claude 3\", description: \"Anthropic 的 Claude 模型\" },\r\n]\r\n\r\n// Mock DSPy AI 分析返回的数据\r\nconst MOCK_AI_ANALYSIS_RESULT = {\r\n  sla: \"8\", // 从文档中提取的 SLA 时间（小时）\r\n  collaboration_norms: `【服务标准定义】\r\n1. SLA承诺：标准响应时间 8小时，解决时间 24小时。\r\n2. 审批流程：\r\n   - 申请人提交 -> 直属经理审批 (Level 1) -> HR 备案 (Level 2)\r\n   - 若请假时长 > 3天，需增加部门总监审批。\r\n\r\n【表单字段约束】\r\n1. 必须采集字段：\r\n   - 请假类型 (Select: 事假/病假/年假)\r\n   - 开始时间 & 结束时间 (DateRange)\r\n   - 紧急联系人 (Text)\r\n2. 校验规则：结束时间必须晚于开始时间；病假需上传证明附件。`,\r\n  \r\n  agent_cot_instructions: `你现在是企业HR服务助手，正在处理用户的\"请假申请\"请求。\r\n\r\n【思维链/执行策略】\r\n1. Phase 1 - 意图确认与资格检查：\r\n   - 首先询问用户具体的请假类型。\r\n   - [Check] 如果用户选择\"年假\"，先在后台调用 \\`check_leave_balance\\` API 查询其余额。如果余额不足，委婉拒绝并建议调休。\r\n\r\n2. Phase 2 - 信息槽位填充 (Slot Filling)：\r\n   - 引导用户提供起止日期。注意：如果用户只说了\"明天\"，请反问具体的恢复工作日期。\r\n   - 询问是否有工作交接人。\r\n\r\n3. Phase 3 - 提交与反馈：\r\n   - 在收集完所有字段后，向用户展示完整的申请摘要。\r\n   - 获得用户确认后，调用 \\`submit_leave_request\\` 工具。\r\n   - 告知用户审批链接已发送给其直属经理。`\r\n}\r\n\r\n// Rich Text Editor Toolbar Component\r\nfunction RichTextToolbar() {\r\n  return (\r\n    <div className=\"flex items-center gap-1 px-3 py-2 border-b border-gray-200 bg-white rounded-t-xl\">\r\n      <button\r\n        type=\"button\"\r\n        className=\"p-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-all\"\r\n      >\r\n        <Bold className=\"w-4 h-4\" />\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        className=\"p-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-all\"\r\n      >\r\n        <Italic className=\"w-4 h-4\" />\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        className=\"p-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-all\"\r\n      >\r\n        <Link className=\"w-4 h-4\" />\r\n      </button>\r\n      <button\r\n        type=\"button\"\r\n        className=\"p-1.5 rounded-md text-gray-500 hover:text-gray-700 hover:bg-gray-100 transition-all\"\r\n      >\r\n        <List className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function CreateServiceDrawer({ open, onOpenChange, mode = \"create\", editingService }: CreateServiceDrawerProps) {\r\n  const [formData, setFormData] = useState({\r\n    categoryId: \"\",\r\n    name: \"\",\r\n    code: \"\",\r\n    icon: \"\",\r\n    sla: \"\",\r\n    description: \"\",\r\n    collaborationRules: \"\",\r\n    infoCollectionPrompt: \"\",\r\n    enabled: true,\r\n  })\r\n  const [categoryDropdownOpen, setCategoryDropdownOpen] = useState(false)\r\n  const [validationError, setValidationError] = useState<string | null>(null)\r\n\r\n  // 新增状态：文档上传 & AI 分析\r\n  const [uploadedFile, setUploadedFile] = useState<File | null>(null)\r\n  const [isAnalyzing, setIsAnalyzing] = useState(false)\r\n  const [uploadProgress, setUploadProgress] = useState(0)\r\n  const [hasAnalyzed, setHasAnalyzed] = useState(false)\r\n  const [aiAnalyzedSuccessfully, setAiAnalyzedSuccessfully] = useState(false) // 标记AI是否识别成功\r\n  const [showReplaceUpload, setShowReplaceUpload] = useState(false)\r\n  const [analysisError, setAnalysisError] = useState<string | null>(null)\r\n  const [showReplaceConfirm, setShowReplaceConfirm] = useState(false)\r\n  const [mermaidZoom, setMermaidZoom] = useState(1) // Mermaid 缩放级别\r\n\r\n  // Agent 配置相关状态\r\n  const [agentModel, setAgentModel] = useState<string>(\"gpt-4\")\r\n  const [agentConfigExpanded, setAgentConfigExpanded] = useState(false) // 控制 Agent 配置区域展开/收起\r\n  const [selectedSkills, setSelectedSkills] = useState<string[]>([]) // 已选择的 Skills\r\n  const [selectedMCPs, setSelectedMCPs] = useState<string[]>([]) // 已选择的 MCP Servers\r\n  const [aiRecommendedSkills, setAiRecommendedSkills] = useState<string[]>([]) // AI 推荐的 Skills\r\n  const [aiRecommendedMCPs, setAiRecommendedMCPs] = useState<string[]>([]) // AI 推荐的 MCPs\r\n  const [recommendationSource, setRecommendationSource] = useState<'ai' | 'manual' | 'mixed'>('manual') // 推荐来源\r\n  const [showSkillSelector, setShowSkillSelector] = useState(false) // 显示手动选择 Skills 对话框\r\n  const [showMCPSelector, setShowMCPSelector] = useState(false) // 显示手动选择 MCP 对话框\r\n\r\n  // 知识库挂载列表\r\n  const [knowledgeLibrary, setKnowledgeLibrary] = useState<Array<{\r\n    id: string\r\n    name: string\r\n    type: \"source\" | \"reference\"\r\n    uploadedAt: string\r\n  }>>([])\r\n  const [showAddKnowledge, setShowAddKnowledge] = useState(false)\r\n  const [newKnowledgeFile, setNewKnowledgeFile] = useState<File | null>(null)\r\n\r\n  // 当编辑服务时，填充表单数据\r\n  useEffect(() => {\r\n    if (editingService) {\r\n      setFormData({\r\n        categoryId: editingService.category,\r\n        name: editingService.title,\r\n        code: editingService.code,\r\n        icon: editingService.icon || \"\",\r\n        description: editingService.description,\r\n        sla: editingService.sla.replace('h', ''),\r\n        collaborationRules: editingService.collaborationRules || \"\",\r\n        infoCollectionPrompt: editingService.infoCollectionPrompt || \"\",\r\n        enabled: true,\r\n      })\r\n      \r\n      // 如果有已上传的文档，初始化知识库列表\r\n      if (editingService.uploadedDocument) {\r\n        setKnowledgeLibrary([{\r\n          id: \"source-doc\",\r\n          name: editingService.uploadedDocument.name,\r\n          type: \"source\",\r\n          uploadedAt: editingService.uploadedDocument.uploadedAt,\r\n        }])\r\n      }\r\n      \r\n      setShowReplaceUpload(false)\r\n    } else {\r\n      // 创建模式：重置所有状态\r\n      setFormData({\r\n        categoryId: \"\",\r\n        name: \"\",\r\n        code: \"\",\r\n        icon: \"\",\r\n        sla: \"\",\r\n        description: \"\",\r\n        collaborationRules: \"\",\r\n        infoCollectionPrompt: \"\",\r\n        enabled: true,\r\n      })\r\n      setUploadedFile(null)\r\n      setUploadProgress(0)\r\n      setHasAnalyzed(false)\r\n      setShowReplaceUpload(false)\r\n      setKnowledgeLibrary([])\r\n    }\r\n  }, [editingService, open])\r\n\r\n  // 处理文件上传\r\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (file) {\r\n      setUploadedFile(file)\r\n      setHasAnalyzed(false)\r\n      // 模拟上传进度\r\n      setUploadProgress(0)\r\n      const interval = setInterval(() => {\r\n        setUploadProgress((prev) => {\r\n          if (prev >= 100) {\r\n            clearInterval(interval)\r\n            return 100\r\n          }\r\n          return prev + 20\r\n        })\r\n      }, 100)\r\n    }\r\n  }\r\n\r\n  // 替换文档并重新识别\r\n  const handleReplaceDocument = () => {\r\n    // 显示二次确认对话框\r\n    setShowReplaceConfirm(true)\r\n  }\r\n\r\n  // 确认替换文档\r\n  const confirmReplaceDocument = () => {\r\n    setShowReplaceUpload(true)\r\n    setUploadedFile(null)\r\n    setUploadProgress(0)\r\n    setHasAnalyzed(false)\r\n    setAnalysisError(null)\r\n    // 只移除源文档，保留参考文档\r\n    setKnowledgeLibrary(knowledgeLibrary.filter(doc => doc.type !== \"source\"))\r\n    // 清空配置\r\n    setFormData({\r\n      ...formData,\r\n      collaborationRules: \"\",\r\n      infoCollectionPrompt: \"\",\r\n      sla: \"\",\r\n    })\r\n    setShowReplaceConfirm(false)\r\n  }\r\n\r\n  // AI 智能识别与生成\r\n  const handleAIAnalyze = async () => {\r\n    if (!uploadedFile) return\r\n    \r\n    setIsAnalyzing(true)\r\n    setAnalysisError(null)\r\n    \r\n    // 模拟 DSPy 编译过程 1.5秒\r\n    await new Promise((resolve) => setTimeout(resolve, 1500))\r\n    \r\n    // 模拟 20% 的概率识别失败（用于演示异常处理）\r\n    const shouldFail = Math.random() < 0.2\r\n    \r\n    if (shouldFail) {\r\n      // 识别失败场景\r\n      setAnalysisError(\"无法解析文档结构，请检查是否为加密 PDF 或图片扫描件。\")\r\n      setIsAnalyzing(false)\r\n      return\r\n    }\r\n    \r\n    // 自动填充 SLA 和 Agent 配置\r\n    setFormData({\r\n      ...formData,\r\n      sla: MOCK_AI_ANALYSIS_RESULT.sla, // 从文档中提取的 SLA 回填\r\n      collaborationRules: MOCK_AI_ANALYSIS_RESULT.collaboration_norms,\r\n      infoCollectionPrompt: MOCK_AI_ANALYSIS_RESULT.agent_cot_instructions,\r\n    })\r\n    \r\n    // 将源文档加入知识库列表\r\n    const sourceDoc = {\r\n      id: \"source-doc-\" + Date.now(),\r\n      name: uploadedFile.name,\r\n      type: \"source\" as const,\r\n      uploadedAt: new Date().toLocaleString(),\r\n    }\r\n    setKnowledgeLibrary([sourceDoc])\r\n    \r\n    // AI 推荐 Skills 和 MCP（模拟）\r\n    const recommendedSkills = [\"skill-1\", \"skill-2\", \"skill-3\"] // check_leave_balance, submit_leave_request, query_approval_status\r\n    const recommendedMCPs = [\"mcp-1\"] // HR System MCP\r\n    \r\n    setAiRecommendedSkills(recommendedSkills)\r\n    setAiRecommendedMCPs(recommendedMCPs)\r\n    setSelectedSkills(recommendedSkills) // 自动选中 AI 推荐的\r\n    setSelectedMCPs(recommendedMCPs)\r\n    setRecommendationSource('ai')\r\n    \r\n    // 【关键】路径1：AI 识别成功 -> 自动展开 Agent 配置区域\r\n    setAgentConfigExpanded(true)\r\n    \r\n    setIsAnalyzing(false)\r\n    setHasAnalyzed(true)\r\n    setAiAnalyzedSuccessfully(true) // 标记AI识别成功\r\n    setShowReplaceUpload(false)\r\n  }\r\n\r\n  // 跳过 AI 生成，手动填写\r\n  const handleSkipAI = () => {\r\n    setAnalysisError(null)\r\n    setHasAnalyzed(true)\r\n    setAiAnalyzedSuccessfully(false) // 跳过AI，不显示识别成功提示\r\n    // 清空自动填充的内容，让用户手动填写\r\n    setFormData({\r\n      ...formData,\r\n      collaborationRules: \"\",\r\n      infoCollectionPrompt: \"\",\r\n    })\r\n    \r\n    // 【关键】路径2：跳过 AI -> 也展开 Agent 配置区域，提示用户手动配置\r\n    setAgentConfigExpanded(true)\r\n    setRecommendationSource('manual')\r\n  }\r\n\r\n  // 手动添加 Skill\r\n  const handleAddSkill = (skillId: string) => {\r\n    if (!selectedSkills.includes(skillId)) {\r\n      setSelectedSkills([...selectedSkills, skillId])\r\n      // 如果之前是纯 AI 推荐，现在变成混合模式\r\n      if (recommendationSource === 'ai') {\r\n        setRecommendationSource('mixed')\r\n      }\r\n    }\r\n  }\r\n\r\n  // 移除 Skill\r\n  const handleRemoveSkill = (skillId: string) => {\r\n    setSelectedSkills(selectedSkills.filter(id => id !== skillId))\r\n  }\r\n\r\n  // 手动添加 MCP\r\n  const handleAddMCP = (mcpId: string) => {\r\n    if (!selectedMCPs.includes(mcpId)) {\r\n      setSelectedMCPs([...selectedMCPs, mcpId])\r\n      // 如果之前是纯 AI 推荐，现在变成混合模式\r\n      if (recommendationSource === 'ai') {\r\n        setRecommendationSource('mixed')\r\n      }\r\n    }\r\n  }\r\n\r\n  // 移除 MCP\r\n  const handleRemoveMCP = (mcpId: string) => {\r\n    setSelectedMCPs(selectedMCPs.filter(id => id !== mcpId))\r\n  }\r\n\r\n  // 添加参考知识库文档\r\n  const handleAddKnowledgeFile = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0]\r\n    if (file) {\r\n      const newDoc = {\r\n        id: \"ref-doc-\" + Date.now(),\r\n        name: file.name,\r\n        type: \"reference\" as const,\r\n        uploadedAt: new Date().toLocaleString(),\r\n      }\r\n      setKnowledgeLibrary([...knowledgeLibrary, newDoc])\r\n      setNewKnowledgeFile(null)\r\n      setShowAddKnowledge(false)\r\n    }\r\n  }\r\n\r\n  // 删除知识库文档\r\n  const handleRemoveKnowledge = (id: string) => {\r\n    setKnowledgeLibrary(knowledgeLibrary.filter((item) => item.id !== id))\r\n  }\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    // 验证必填字段\r\n    if (!formData.categoryId) {\r\n      setValidationError(\"请选择所属目录\")\r\n      setTimeout(() => setValidationError(null), 3000)\r\n      return\r\n    }\r\n    if (!formData.name.trim()) {\r\n      setValidationError(\"请输入服务名称\")\r\n      setTimeout(() => setValidationError(null), 3000)\r\n      return\r\n    }\r\n    if (!formData.code.trim()) {\r\n      setValidationError(\"请输入服务编码\")\r\n      setTimeout(() => setValidationError(null), 3000)\r\n      return\r\n    }\r\n    \r\n    console.log(\"Save service:\", {\r\n      ...formData,\r\n      knowledgeLibrary, // 包含知识库列表\r\n    })\r\n    setValidationError(null)\r\n    onOpenChange(false)\r\n  }\r\n\r\n  const handleReset = () => {\r\n    if (mode === \"edit\" && editingService) {\r\n      // 编辑模式：恢复到初始值\r\n      setFormData({\r\n        categoryId: editingService.category,\r\n        name: editingService.title,\r\n        code: editingService.code,\r\n        icon: editingService.icon || \"\",\r\n        description: editingService.description,\r\n        sla: editingService.sla.replace('h', ''),\r\n        collaborationRules: editingService.collaborationRules || \"\",\r\n        infoCollectionPrompt: editingService.infoCollectionPrompt || \"\",\r\n        enabled: true,\r\n      })\r\n    } else {\r\n      // 创建模式：清空表单\r\n      setFormData({\r\n        categoryId: \"\",\r\n        name: \"\",\r\n        code: \"\",\r\n        icon: \"\",\r\n        sla: \"\",\r\n        description: \"\",\r\n        collaborationRules: \"\",\r\n        infoCollectionPrompt: \"\",\r\n        enabled: true,\r\n      })\r\n    }\r\n  }\r\n\r\n  const selectedCategory = categories.find((c) => c.id === formData.categoryId)\r\n\r\n  return (\r\n    <Sheet open={open} onOpenChange={onOpenChange}>\r\n      <SheetContent\r\n        side=\"right\"\r\n        showClose={false}\r\n        className=\"w-full sm:max-w-none sm:w-[65vw] p-0 bg-white shadow-2xl border-l border-gray-200 flex flex-col\"\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between px-8 py-5 border-b border-gray-100 bg-white\">\r\n          <div className=\"flex items-center gap-4\">\r\n            <SheetTitle className=\"text-lg font-semibold text-gray-900\">\r\n              {mode === \"edit\" ? \"编辑服务策略\" : \"添加服务策略\"}\r\n            </SheetTitle>\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => onOpenChange(false)}\r\n            className=\"w-8 h-8 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-all\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Scrollable Body - 统一的流式长页面 */}\r\n        <div className=\"flex-1 overflow-y-auto\">\r\n          <div className=\"px-8 py-6 space-y-8\">\r\n              {/* Section A: 基础信息 (Basic Info) */}\r\n              <section className=\"space-y-5\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"w-1.5 h-5 rounded-full bg-gradient-to-b from-blue-500 to-blue-600\" />\r\n                  <h3 className=\"text-base font-semibold text-gray-900\">基础信息</h3>\r\n                  <span className=\"text-xs text-gray-400 ml-1\">Basic Info</span>\r\n                </div>\r\n\r\n                {/* 所属目录 */}\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-gray-700\">\r\n                    所属目录 <span className=\"text-red-500\">*</span>\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setCategoryDropdownOpen(!categoryDropdownOpen)}\r\n                      className=\"w-full flex items-center justify-between px-4 py-2.5 rounded-xl border border-gray-200 text-sm bg-white hover:border-indigo-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n                    >\r\n                      <span className={selectedCategory ? \"text-gray-900\" : \"text-gray-400\"}>\r\n                        {selectedCategory?.label || \"请选择服务目录\"}\r\n                      </span>\r\n                      <ChevronDown className={cn(\r\n                        \"w-4 h-4 text-gray-400 transition-transform\",\r\n                        categoryDropdownOpen && \"rotate-180\"\r\n                      )} />\r\n                    </button>\r\n                    {categoryDropdownOpen && (\r\n                      <div className=\"absolute z-10 top-full mt-1 w-full bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden\">\r\n                        {categories.map((category) => (\r\n                          <button\r\n                            key={category.id}\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                              setFormData({ ...formData, categoryId: category.id })\r\n                              setCategoryDropdownOpen(false)\r\n                            }}\r\n                            className={cn(\r\n                              \"w-full px-4 py-2.5 text-sm text-left hover:bg-indigo-50 transition-all\",\r\n                              formData.categoryId === category.id\r\n                                ? \"bg-indigo-50 text-indigo-600\"\r\n                                : \"text-gray-700\"\r\n                            )}\r\n                          >\r\n                            {category.label}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* 服务名称 & 编码 - Grid Layout */}\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-sm font-medium text-gray-700\">\r\n                      服务名称 <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      required\r\n                      placeholder=\"例如：员工请假申请\"\r\n                      value={formData.name}\r\n                      onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n                      className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"space-y-2\">\r\n                    <label className=\"text-sm font-medium text-gray-700\">\r\n                      服务编码 <span className=\"text-red-500\">*</span>\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      required\r\n                      placeholder=\"唯一标识，如 srv_leave_request\"\r\n                      value={formData.code}\r\n                      onChange={(e) => setFormData({ ...formData, code: e.target.value })}\r\n                      className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-mono placeholder:text-gray-400 placeholder:font-sans focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* 图标 */}\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-gray-700\">\r\n                    图标\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"图标类名或 URL\"\r\n                    value={formData.icon}\r\n                    onChange={(e) => setFormData({ ...formData, icon: e.target.value })}\r\n                    className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n                  />\r\n                </div>\r\n\r\n                {/* 描述 */}\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-gray-700\">\r\n                    服务描述\r\n                  </label>\r\n                  <textarea\r\n                    rows={3}\r\n                    placeholder=\"请输入服务描述...\"\r\n                    value={formData.description}\r\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n                    className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 text-sm placeholder:text-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n                  />\r\n                </div>\r\n              </section>\r\n\r\n              {/* 高级设置 - 提前到顶部便于快速访问 */}\r\n              <section className=\"space-y-5\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"w-1.5 h-5 rounded-full bg-gradient-to-b from-blue-500 to-blue-600\" />\r\n                  <h3 className=\"text-base font-semibold text-gray-900\">高级设置</h3>\r\n                </div>\r\n\r\n                {/* 是否启用 - Toggle Switch */}\r\n                <div className=\"flex items-center justify-between py-3 px-4 rounded-xl bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200\">\r\n                  <div>\r\n                    <label className=\"text-sm font-medium text-gray-700\">\r\n                      是否启用\r\n                    </label>\r\n                    <p className=\"text-xs text-gray-500 mt-0.5\">启用后该服务将在服务目录中显示</p>\r\n                  </div>\r\n                  <button\r\n                    type=\"button\"\r\n                    role=\"switch\"\r\n                    aria-checked={formData.enabled}\r\n                    onClick={() => setFormData({ ...formData, enabled: !formData.enabled })}\r\n                    className={cn(\r\n                      \"relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\",\r\n                      formData.enabled ? \"bg-indigo-600\" : \"bg-gray-300\"\r\n                    )}\r\n                  >\r\n                    <span\r\n                      className={cn(\r\n                        \"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-200 ease-in-out\",\r\n                        formData.enabled ? \"translate-x-5\" : \"translate-x-0\"\r\n                      )}\r\n                    />\r\n                  </button>\r\n                </div>\r\n              </section>\r\n\r\n              {/* Section B: 知识源注入 (Knowledge Injection) - 【新增核心区域】 */}\r\n              <section className=\"space-y-5\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"w-1.5 h-5 rounded-full bg-gradient-to-b from-violet-500 to-purple-500\" />\r\n                  <h3 className=\"text-base font-semibold text-gray-900\">知识源注入</h3>\r\n                  <span className=\"text-xs text-gray-400 ml-1\">Knowledge Injection</span>\r\n                  <div className=\"ml-auto flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-gradient-to-r from-violet-50 to-purple-50 border border-violet-100\">\r\n                    <Sparkles className=\"w-3.5 h-3.5 text-violet-500\" />\r\n                    <span className=\"text-xs font-medium text-violet-600\">AI Powered</span>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* 编辑模式下：已上传文件卡片 */}\r\n                {mode === \"edit\" && editingService?.uploadedDocument && !showReplaceUpload ? (\r\n                  <div className=\"space-y-4\">\r\n                    <div className=\"flex items-center gap-4 p-4 rounded-2xl border-2 border-green-200 bg-gradient-to-r from-green-50 to-emerald-50\">\r\n                      <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg shadow-green-500/20 flex-shrink-0\">\r\n                        <FileText className=\"w-5 h-5 text-white\" />\r\n                      </div>\r\n                      <div className=\"flex-1 min-w-0\">\r\n                        <p className=\"text-sm font-semibold text-gray-900 truncate\">\r\n                          {editingService.uploadedDocument.name}\r\n                        </p>\r\n                        <p className=\"text-xs text-gray-500 mt-1\">\r\n                          上传于: {editingService.uploadedDocument.uploadedAt}\r\n                        </p>\r\n                      </div>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={handleReplaceDocument}\r\n                        className=\"flex items-center gap-2 px-4 py-2.5 rounded-lg bg-white border border-gray-200 text-sm font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-300 transition-all flex-shrink-0\"\r\n                      >\r\n                        <Upload className=\"w-4 h-4\" />\r\n                        替换并重新识别\r\n                      </button>\r\n                    </div>\r\n                    <p className=\"text-xs text-gray-500 flex items-start gap-1.5\">\r\n                      <span className=\"text-blue-500 font-bold mt-0.5\">💡</span>\r\n                      <span>源文档已自动加入知识库，如需重新生成配置，请点击\"替换并重新识别\"按钮</span>\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    {/* 文件上传区域 */}\r\n                    <div className=\"relative\">\r\n                      <input\r\n                        type=\"file\"\r\n                        id=\"document-upload\"\r\n                        accept=\".pdf,.doc,.docx\"\r\n                        onChange={handleFileUpload}\r\n                        className=\"hidden\"\r\n                      />\r\n                      <label\r\n                        htmlFor=\"document-upload\"\r\n                        className={cn(\r\n                          \"flex flex-col items-center justify-center py-8 px-6 rounded-2xl border-2 border-dashed transition-all cursor-pointer\",\r\n                          uploadedFile\r\n                            ? \"border-blue-300 bg-blue-50/30\"\r\n                            : \"border-gray-200 bg-gradient-to-br from-blue-50/30 to-indigo-50/20 hover:border-blue-300 hover:bg-blue-50/50\"\r\n                        )}\r\n                      >\r\n                        {!uploadedFile ? (\r\n                          <>\r\n                            <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center mb-3 shadow-lg shadow-blue-500/20\">\r\n                              <FileUp className=\"w-6 h-6 text-white\" />\r\n                            </div>\r\n                            <div className=\"text-center\">\r\n                              <p className=\"text-sm font-medium text-gray-700 mb-1\">\r\n                                上传业务规范文档（PDF/Word）\r\n                              </p>\r\n                              <p className=\"text-xs text-gray-500\">\r\n                                AI 将自动提取服务逻辑\r\n                              </p>\r\n                            </div>\r\n                            <div className=\"mt-4 px-4 py-2 rounded-lg bg-white border border-gray-200 text-xs text-gray-600\">\r\n                              点击上传或拖拽文件至此区域\r\n                            </div>\r\n                          </>\r\n                        ) : (\r\n                          <div className=\"w-full\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div className=\"w-10 h-10 rounded-lg bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center shadow-lg shadow-green-500/20\">\r\n                                <CheckCircle2 className=\"w-5 h-5 text-white\" />\r\n                              </div>\r\n                              <div className=\"flex-1\">\r\n                                <p className=\"text-sm font-semibold text-gray-900 mb-1\">\r\n                                  {uploadedFile.name}\r\n                                </p>\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <div className=\"flex-1 h-1.5 bg-gray-100 rounded-full overflow-hidden\">\r\n                                    <div \r\n                                      className=\"h-full bg-gradient-to-r from-green-500 to-emerald-500 transition-all duration-300\"\r\n                                      style={{ width: `${uploadProgress}%` }}\r\n                                    />\r\n                                  </div>\r\n                                  <span className=\"text-xs font-medium text-green-600\">\r\n                                    {uploadProgress}%\r\n                                  </span>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </label>\r\n                    </div>\r\n\r\n                    {/* AI 智能识别按钮 */}\r\n                    <div className=\"flex justify-center gap-3\">\r\n                      {/* 只在未识别时显示AI识别按钮 */}\r\n                      {!hasAnalyzed && (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={handleAIAnalyze}\r\n                          disabled={!uploadedFile || uploadProgress < 100 || isAnalyzing}\r\n                          className={cn(\r\n                            \"group relative px-6 py-2.5 rounded-xl font-semibold text-white shadow-lg transition-all duration-300\",\r\n                            uploadedFile && uploadProgress === 100 && !isAnalyzing\r\n                              ? \"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 hover:shadow-xl hover:shadow-indigo-500/40 hover:scale-[1.02] active:scale-[0.98]\"\r\n                              : \"bg-gray-200 text-gray-400 cursor-not-allowed\"\r\n                          )}\r\n                        >\r\n                          <div className=\"flex items-center gap-2\">\r\n                            {isAnalyzing ? (\r\n                              <>\r\n                                <Loader2 className=\"w-5 h-5 animate-spin\" />\r\n                                <span>AI 正在分析文档...</span>\r\n                              </>\r\n                            ) : (\r\n                              <>\r\n                                <Sparkles className=\"w-4 h-4 group-hover:rotate-12 transition-transform\" />\r\n                                <span>AI 智能识别与生成</span>\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                          {uploadedFile && uploadProgress === 100 && !isAnalyzing && !hasAnalyzed && (\r\n                            <div className=\"absolute inset-0 rounded-xl bg-gradient-to-r from-blue-400 via-indigo-400 to-purple-400 opacity-0 group-hover:opacity-20 blur-xl transition-opacity\" />\r\n                          )}\r\n                        </button>\r\n                      )}\r\n                      \r\n                      {/* 路径3：跳过知识来源，直接进入手动配置 */}\r\n                      {!hasAnalyzed && !uploadedFile && (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={() => {\r\n                            setHasAnalyzed(true)\r\n                            setAgentConfigExpanded(true)\r\n                            setRecommendationSource('manual')\r\n                          }}\r\n                          className=\"px-6 py-2.5 rounded-xl font-semibold bg-white text-gray-700 hover:bg-gray-50 shadow-md hover:shadow-lg transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] border border-gray-200\"\r\n                        >\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Brain className=\"w-4 h-4\" />\r\n                            <span>跳过知识来源，手动配置</span>\r\n                          </div>\r\n                        </button>\r\n                      )}\r\n                      \r\n                      {/* 识别完成后显示重新上传按钮 */}\r\n                      {hasAnalyzed && !analysisError && (\r\n                        <button\r\n                          type=\"button\"\r\n                          onClick={handleReplaceDocument}\r\n                          className=\"px-6 py-2.5 rounded-xl font-semibold bg-white text-gray-700 hover:bg-gray-50 shadow-md hover:shadow-lg transition-all duration-300 hover:scale-[1.02] active:scale-[0.98]\"\r\n                        >\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <Upload className=\"w-4 h-4\" />\r\n                            <span>重新上传并识别</span>\r\n                          </div>\r\n                        </button>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* 识别提示 - 只在AI识别成功时显示 */}\r\n                    {hasAnalyzed && !analysisError && aiAnalyzedSuccessfully && (\r\n                      <div className=\"flex items-start gap-3 p-4 rounded-xl bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 animate-in fade-in slide-in-from-top-2 duration-500\">\r\n                        <div className=\"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                          <CheckCircle2 className=\"w-3 h-3 text-white\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"text-sm font-semibold text-green-900 mb-1\">\r\n                            AI 识别完成\r\n                          </p>\r\n                          <p className=\"text-xs text-green-700\">\r\n                            已自动填充 SLA 时间（{MOCK_AI_ANALYSIS_RESULT.sla}小时）和 Agent 配置内容，您可以根据需要修改\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* 识别失败提示 */}\r\n                    {analysisError && (\r\n                      <div className=\"flex items-start gap-3 p-4 rounded-xl bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 animate-in fade-in slide-in-from-top-2 duration-500\">\r\n                        <div className=\"w-5 h-5 rounded-full bg-red-500 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                          <AlertTriangle className=\"w-3 h-3 text-white\" />\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <p className=\"text-sm font-semibold text-red-900 mb-1\">\r\n                            文档识别失败\r\n                          </p>\r\n                          <p className=\"text-xs text-red-700 mb-3\">\r\n                            {analysisError}\r\n                          </p>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={handleAIAnalyze}\r\n                              className=\"px-3 py-1.5 rounded-lg bg-white border border-red-200 text-xs font-medium text-red-700 hover:bg-red-50 transition-all\"\r\n                            >\r\n                              重试识别\r\n                            </button>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={handleSkipAI}\r\n                              className=\"px-3 py-1.5 rounded-lg bg-red-600 text-xs font-medium text-white hover:bg-red-700 transition-all\"\r\n                            >\r\n                              跳过 AI，手动填写\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}  \r\n              </section>\r\n\r\n              {/* Section B1: Agent 配置 - 动态展开区域 */}\r\n              {agentConfigExpanded && (\r\n                <section className=\"space-y-5 animate-in slide-in-from-top-2 duration-500\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-1.5 h-5 rounded-full bg-gradient-to-b from-violet-500 to-purple-500\" />\r\n                    <h3 className=\"text-base font-semibold text-gray-900\">Agent 配置</h3>\r\n                    <span className=\"text-xs text-gray-400 ml-1\">Agent Configuration</span>\r\n                    <Brain className=\"w-4 h-4 text-violet-500 ml-1\" />\r\n                    {recommendationSource === 'ai' && (\r\n                      <div className=\"ml-auto flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-gradient-to-r from-violet-50 to-purple-50 border border-violet-100\">\r\n                        <Sparkles className=\"w-3.5 h-3.5 text-violet-500\" />\r\n                        <span className=\"text-xs font-medium text-violet-600\">AI 推荐</span>\r\n                      </div>\r\n                    )}\r\n                    {recommendationSource === 'mixed' && (\r\n                      <div className=\"ml-auto flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-gradient-to-r from-blue-50 to-violet-50 border border-blue-100\">\r\n                        <Sparkles className=\"w-3.5 h-3.5 text-blue-500\" />\r\n                        <span className=\"text-xs font-medium text-blue-600\">AI + 手动</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* 协作规范 */}\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <label className=\"text-sm font-medium text-gray-700\">\r\n                        协作规范\r\n                      </label>\r\n                      <span className=\"text-xs text-gray-400\">Collaboration Norms</span>\r\n                    </div>\r\n                    <div className=\"relative rounded-xl border-2 border-gray-200 overflow-hidden bg-white transition-all focus-within:border-violet-400 focus-within:shadow-lg focus-within:shadow-violet-500/10\">\r\n                      <textarea\r\n                        rows={8}\r\n                        placeholder=\"定义审批流、SLA 细节、必填字段约束...&#10;&#10;提示：点击上方 'AI 智能识别' 按钮自动生成\"\r\n                        value={formData.collaborationRules}\r\n                        onChange={(e) => setFormData({ ...formData, collaborationRules: e.target.value })}\r\n                        className=\"w-full px-4 py-3 text-sm placeholder:text-gray-400 resize-none focus:outline-none bg-white leading-relaxed\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* 信息采集提示 (Agent CoT Instructions) */}\r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <label className=\"text-sm font-medium text-gray-700\">\r\n                        信息采集提示\r\n                      </label>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <span className=\"text-xs text-gray-400\">Agent CoT Instructions</span>\r\n                        <div className=\"flex items-center gap-1 px-2 py-0.5 rounded-md bg-violet-100 border border-violet-200\">\r\n                          <Sparkles className=\"w-3 h-3 text-violet-600\" />\r\n                          <span className=\"text-xs font-medium text-violet-600\">思维链</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* 左右并排布局：文本编辑器 + 流程图预览 */}\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4\">\r\n                      {/* 左侧：文本编辑器 */}\r\n                      <div className=\"space-y-2\">\r\n                        <label className=\"text-xs font-medium text-gray-600\">文本编辑</label>\r\n                        <div className=\"relative rounded-xl border-2 border-gray-200 overflow-hidden bg-white transition-all focus-within:border-violet-400 focus-within:shadow-lg focus-within:shadow-violet-500/10\" style={{ height: '480px' }}>\r\n                          <textarea\r\n                            placeholder=\"定义 Agent 的思维链和对话策略...&#10;&#10;提示：点击上方 'AI 智能识别' 按钮自动生成\"\r\n                            value={formData.infoCollectionPrompt}\r\n                            onChange={(e) => setFormData({ ...formData, infoCollectionPrompt: e.target.value })}\r\n                            className=\"w-full h-full px-4 py-3 text-sm placeholder:text-gray-400 resize-none focus:outline-none bg-white leading-relaxed\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* 右侧：流程图预览 */}\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <label className=\"text-xs font-medium text-gray-600\">流程图预览</label>\r\n                          <div className=\"flex items-center gap-1\">\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => setMermaidZoom(Math.max(0.5, mermaidZoom - 0.1))}\r\n                              disabled={mermaidZoom <= 0.5}\r\n                              className=\"w-7 h-7 rounded-lg flex items-center justify-center text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all\"\r\n                              title=\"缩小\"\r\n                            >\r\n                              <span className=\"text-lg font-bold\">−</span>\r\n                            </button>\r\n                            <span className=\"text-xs text-gray-500 min-w-[3rem] text-center\">\r\n                              {Math.round(mermaidZoom * 100)}%\r\n                            </span>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => setMermaidZoom(Math.min(2, mermaidZoom + 0.1))}\r\n                              disabled={mermaidZoom >= 2}\r\n                              className=\"w-7 h-7 rounded-lg flex items-center justify-center text-gray-600 hover:bg-gray-100 disabled:opacity-40 disabled:cursor-not-allowed transition-all\"\r\n                              title=\"放大\"\r\n                            >\r\n                              <span className=\"text-lg font-bold\">+</span>\r\n                            </button>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => setMermaidZoom(1)}\r\n                              className=\"px-2 py-1 rounded-lg text-xs text-gray-600 hover:bg-gray-100 transition-all\"\r\n                              title=\"重置\"\r\n                            >\r\n                              重置\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"rounded-xl border-2 border-gray-200 bg-gray-50 overflow-auto\" style={{ height: '480px' }}>\r\n                          {formData.infoCollectionPrompt ? (\r\n                            <div className=\"p-6 min-h-full flex items-center justify-center\">\r\n                              <div style={{ transform: `scale(${mermaidZoom})`, transformOrigin: 'top center', transition: 'transform 0.2s ease' }}>\r\n                                <MermaidViewer \r\n                                  chart={convertCotToMermaid(formData.infoCollectionPrompt)}\r\n                                  className=\"mermaid-container\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          ) : (\r\n                            <div className=\"flex flex-col items-center justify-center h-full py-12\">\r\n                              <Brain className=\"w-12 h-12 text-violet-300 mb-4\" />\r\n                              <p className=\"text-sm text-gray-500\">暂无思维链配置</p>\r\n                              <p className=\"text-xs text-gray-400 mt-1\">在左侧文本编辑器中添加内容后即可查看流程图</p>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <p className=\"text-xs text-gray-500 flex items-start gap-1.5 mt-2\">\r\n                      <span className=\"text-indigo-500 font-bold mt-0.5\">💡</span>\r\n                      <span>AI 将基于此配置进行推理，引导用户完成信息采集并自动执行对应的服务流程</span>\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Skills 挂载 */}\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <label className=\"text-sm font-medium text-gray-700\">\r\n                        Skills 挂载\r\n                      </label>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setShowSkillSelector(!showSkillSelector)}\r\n                        className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-violet-50 border border-violet-200 text-sm font-medium text-violet-700 hover:bg-violet-100 transition-all\"\r\n                      >\r\n                        <Plus className=\"w-4 h-4\" />\r\n                        添加 Skill\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* 已选择的 Skills */}\r\n                    {selectedSkills.length > 0 ? (\r\n                      <div className=\"space-y-2\">\r\n                        {selectedSkills.map((skillId) => {\r\n                          const skill = AVAILABLE_SKILLS.find(s => s.id === skillId)\r\n                          if (!skill) return null\r\n                          const isAIRecommended = aiRecommendedSkills.includes(skillId)\r\n                          \r\n                          return (\r\n                            <div\r\n                              key={skillId}\r\n                              className=\"flex items-center justify-between p-3 rounded-xl border border-violet-200 bg-gradient-to-r from-violet-50/50 to-purple-50/30 hover:border-violet-300 transition-all group\"\r\n                            >\r\n                              <div className=\"flex items-center gap-3 flex-1\">\r\n                                <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center flex-shrink-0\">\r\n                                  <Sparkles className=\"w-4 h-4 text-white\" />\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <p className=\"text-sm font-medium text-gray-900\">\r\n                                      {skill.name}\r\n                                    </p>\r\n                                    {isAIRecommended && (\r\n                                      <span className=\"px-2 py-0.5 rounded-md bg-violet-100 border border-violet-200 text-xs font-medium text-violet-700 flex-shrink-0\">\r\n                                        AI 推荐\r\n                                      </span>\r\n                                    )}\r\n                                  </div>\r\n                                  <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                                    {skill.description}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => handleRemoveSkill(skillId)}\r\n                                className=\"w-8 h-8 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100\"\r\n                              >\r\n                                <X className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          )\r\n                        })}\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"flex flex-col items-center justify-center py-8 text-center rounded-xl border-2 border-dashed border-gray-200 bg-gray-50/50\">\r\n                        <Sparkles className=\"w-10 h-10 text-gray-300 mb-2\" />\r\n                        <p className=\"text-sm text-gray-600\">暂未挂载 Skills</p>\r\n                        <p className=\"text-xs text-gray-400 mt-1\">点击\"添加 Skill\"按钮选择</p>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Skill 选择器 */}\r\n                    {showSkillSelector && (\r\n                      <div className=\"p-4 rounded-xl border-2 border-violet-200 bg-violet-50/30 space-y-2 animate-in slide-in-from-top-2\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"text-sm font-medium text-gray-700\">选择要添加的 Skills</span>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setShowSkillSelector(false)}\r\n                            className=\"text-xs text-gray-500 hover:text-gray-700\"\r\n                          >\r\n                            收起\r\n                          </button>\r\n                        </div>\r\n                        {AVAILABLE_SKILLS.map((skill) => (\r\n                          <button\r\n                            key={skill.id}\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                              handleAddSkill(skill.id)\r\n                              setShowSkillSelector(false)\r\n                            }}\r\n                            disabled={selectedSkills.includes(skill.id)}\r\n                            className={cn(\r\n                              \"w-full flex items-center justify-between p-3 rounded-lg border text-left transition-all\",\r\n                              selectedSkills.includes(skill.id)\r\n                                ? \"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed\"\r\n                                : \"border-violet-200 bg-white hover:border-violet-300 hover:bg-violet-50\"\r\n                            )}\r\n                          >\r\n                            <div>\r\n                              <p className=\"text-sm font-medium\">{skill.name}</p>\r\n                              <p className=\"text-xs text-gray-500\">{skill.description}</p>\r\n                            </div>\r\n                            {selectedSkills.includes(skill.id) && (\r\n                              <CheckCircle2 className=\"w-4 h-4 text-gray-400\" />\r\n                            )}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* MCP Servers 挂载 */}\r\n                  <div className=\"space-y-3\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <label className=\"text-sm font-medium text-gray-700\">\r\n                        MCP Servers 挂载\r\n                      </label>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setShowMCPSelector(!showMCPSelector)}\r\n                        className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-violet-50 border border-violet-200 text-sm font-medium text-violet-700 hover:bg-violet-100 transition-all\"\r\n                      >\r\n                        <Plus className=\"w-4 h-4\" />\r\n                        添加 MCP\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* 已选择的 MCPs */}\r\n                    {selectedMCPs.length > 0 ? (\r\n                      <div className=\"space-y-2\">\r\n                        {selectedMCPs.map((mcpId) => {\r\n                          const mcp = AVAILABLE_MCP_SERVERS.find(m => m.id === mcpId)\r\n                          if (!mcp) return null\r\n                          const isAIRecommended = aiRecommendedMCPs.includes(mcpId)\r\n                          \r\n                          return (\r\n                            <div\r\n                              key={mcpId}\r\n                              className=\"flex items-center justify-between p-3 rounded-xl border border-violet-200 bg-gradient-to-r from-violet-50/50 to-purple-50/30 hover:border-violet-300 transition-all group\"\r\n                            >\r\n                              <div className=\"flex items-center gap-3 flex-1\">\r\n                                <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-purple-500 flex items-center justify-center flex-shrink-0\">\r\n                                  <Cloud className=\"w-4 h-4 text-white\" />\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                  <div className=\"flex items-center gap-2\">\r\n                                    <p className=\"text-sm font-medium text-gray-900\">\r\n                                      {mcp.name}\r\n                                    </p>\r\n                                    {isAIRecommended && (\r\n                                      <span className=\"px-2 py-0.5 rounded-md bg-violet-100 border border-violet-200 text-xs font-medium text-violet-700 flex-shrink-0\">\r\n                                        AI 推荐\r\n                                      </span>\r\n                                    )}\r\n                                  </div>\r\n                                  <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                                    {mcp.description} · {mcp.protocol}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => handleRemoveMCP(mcpId)}\r\n                                className=\"w-8 h-8 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100\"\r\n                              >\r\n                                <X className=\"w-4 h-4\" />\r\n                              </button>\r\n                            </div>\r\n                          )\r\n                        })}\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"flex flex-col items-center justify-center py-8 text-center rounded-xl border-2 border-dashed border-gray-200 bg-gray-50/50\">\r\n                        <Cloud className=\"w-10 h-10 text-gray-300 mb-2\" />\r\n                        <p className=\"text-sm text-gray-600\">暂未挂载 MCP Servers</p>\r\n                        <p className=\"text-xs text-gray-400 mt-1\">点击\"添加 MCP\"按钮选择</p>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* MCP 选择器 */}\r\n                    {showMCPSelector && (\r\n                      <div className=\"p-4 rounded-xl border-2 border-violet-200 bg-violet-50/30 space-y-2 animate-in slide-in-from-top-2\">\r\n                        <div className=\"flex items-center justify-between mb-2\">\r\n                          <span className=\"text-sm font-medium text-gray-700\">选择要添加的 MCP Servers</span>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => setShowMCPSelector(false)}\r\n                            className=\"text-xs text-gray-500 hover:text-gray-700\"\r\n                          >\r\n                            收起\r\n                          </button>\r\n                        </div>\r\n                        {AVAILABLE_MCP_SERVERS.map((mcp) => (\r\n                          <button\r\n                            key={mcp.id}\r\n                            type=\"button\"\r\n                            onClick={() => {\r\n                              handleAddMCP(mcp.id)\r\n                              setShowMCPSelector(false)\r\n                            }}\r\n                            disabled={selectedMCPs.includes(mcp.id)}\r\n                            className={cn(\r\n                              \"w-full flex items-center justify-between p-3 rounded-lg border text-left transition-all\",\r\n                              selectedMCPs.includes(mcp.id)\r\n                                ? \"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed\"\r\n                                : \"border-violet-200 bg-white hover:border-violet-300 hover:bg-violet-50\"\r\n                            )}\r\n                          >\r\n                            <div>\r\n                              <p className=\"text-sm font-medium\">{mcp.name}</p>\r\n                              <p className=\"text-xs text-gray-500\">{mcp.description} · {mcp.protocol}</p>\r\n                            </div>\r\n                            {selectedMCPs.includes(mcp.id) && (\r\n                              <CheckCircle2 className=\"w-4 h-4 text-gray-400\" />\r\n                            )}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* 提示信息 */}\r\n                  {recommendationSource === 'ai' && (\r\n                    <div className=\"flex items-start gap-3 p-4 rounded-xl bg-gradient-to-r from-violet-50 to-purple-50 border border-violet-200\">\r\n                      <Sparkles className=\"w-5 h-5 text-violet-500 flex-shrink-0 mt-0.5\" />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm font-semibold text-violet-900 mb-1\">\r\n                          AI 已自动挂载推荐的 Skills 和 MCP\r\n                        </p>\r\n                        <p className=\"text-xs text-violet-700\">\r\n                          基于文档内容分析，这些工具可以帮助 Agent 完成服务流程。您可以手动调整。\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                  {recommendationSource === 'manual' && (\r\n                    <div className=\"flex items-start gap-3 p-4 rounded-xl bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200\">\r\n                      <Brain className=\"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5\" />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"text-sm font-semibold text-blue-900 mb-1\">\r\n                          手动配置模式\r\n                        </p>\r\n                        <p className=\"text-xs text-blue-700\">\r\n                          请手动选择需要挂载的 Skills 和 MCP Servers，并配置 Agent 的协作规范和思维链指令。\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </section>\r\n              )}\r\n\r\n              {/* SLA 时间 - 单独区域 */}\r\n              <section className=\"space-y-5\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"w-1.5 h-5 rounded-full bg-gradient-to-b from-amber-500 to-orange-500\" />\r\n                  <h3 className=\"text-base font-semibold text-gray-900\">SLA 时间</h3>\r\n                  <span className=\"text-xs text-gray-400 ml-1\">Service Level Agreement</span>\r\n                </div>\r\n\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-gray-700\">\r\n                    响应时限\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"请输入 SLA 响应时限\"\r\n                      value={formData.sla}\r\n                      onChange={(e) => setFormData({ ...formData, sla: e.target.value })}\r\n                      className=\"w-full px-4 py-2.5 pr-14 rounded-xl border border-gray-200 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n                    />\r\n                    <span className=\"absolute right-4 top-1/2 -translate-y-1/2 text-sm text-gray-400\">\r\n                      小时\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    AI 识别后会自动填充，您也可以手动修改\r\n                  </p>\r\n                </div>\r\n              </section>\r\n\r\n              {/* Section E: 关联知识库 (Reference Knowledge) - 【新增区域】 */}\r\n              <section className=\"space-y-5\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <div className=\"w-1.5 h-5 rounded-full bg-gradient-to-b from-amber-500 to-orange-500\" />\r\n                  <h3 className=\"text-base font-semibold text-gray-900\">关联知识库</h3>\r\n                  <span className=\"text-xs text-gray-400 ml-1\">Reference Knowledge</span>\r\n                  <div className=\"ml-auto\">\r\n                    <input\r\n                      type=\"file\"\r\n                      id=\"knowledge-file-upload\"\r\n                      accept=\".pdf,.doc,.docx,.txt,.md\"\r\n                      onChange={handleAddKnowledgeFile}\r\n                      className=\"hidden\"\r\n                    />\r\n                    <label\r\n                      htmlFor=\"knowledge-file-upload\"\r\n                      className=\"flex items-center gap-2 px-3 py-2 rounded-lg bg-amber-50 border border-amber-200 text-sm font-medium text-amber-700 hover:bg-amber-100 transition-all cursor-pointer\"\r\n                    >\r\n                      <Plus className=\"w-4 h-4\" />\r\n                      添加文档\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n\r\n                <p className=\"text-xs text-gray-500 -mt-2\">\r\n                  这些文档将用于 RAG 检索增强，不会触发 DSPy 流程生成。源文档已自动加入列表。\r\n                </p>\r\n\r\n                {/* 知识库列表 */}\r\n                <div className=\"space-y-3\">\r\n                  {knowledgeLibrary.length > 0 ? (\r\n                    knowledgeLibrary.map((item) => (\r\n                      <div\r\n                        key={item.id}\r\n                        className=\"flex items-center justify-between p-4 rounded-xl border border-gray-200 bg-white hover:border-amber-200 hover:bg-amber-50/30 transition-all group\"\r\n                      >\r\n                        <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                          <div className={cn(\r\n                            \"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0\",\r\n                            item.type === \"source\" \r\n                              ? \"bg-gradient-to-br from-blue-500 to-indigo-500 shadow-lg shadow-blue-500/20\" \r\n                              : \"bg-gradient-to-br from-amber-400 to-orange-400 shadow-lg shadow-amber-500/20\"\r\n                          )}>\r\n                            <FileText className=\"w-5 h-5 text-white\" />\r\n                          </div>\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <p className=\"text-sm font-medium text-gray-900 truncate\">\r\n                                {item.name}\r\n                              </p>\r\n                              {item.type === \"source\" && (\r\n                                <span className=\"px-2 py-0.5 rounded-md bg-blue-100 border border-blue-200 text-xs font-medium text-blue-700 flex-shrink-0\">\r\n                                  源文档\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                            <p className=\"text-xs text-gray-500 mt-0.5\">\r\n                              上传于: {item.uploadedAt}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                        {item.type === \"reference\" && (\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => handleRemoveKnowledge(item.id)}\r\n                            className=\"w-8 h-8 rounded-lg flex items-center justify-center text-gray-400 hover:text-red-500 hover:bg-red-50 transition-all opacity-0 group-hover:opacity-100\"\r\n                          >\r\n                            <Trash2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    ))\r\n                  ) : (\r\n                    <div className=\"flex flex-col items-center justify-center py-12 text-center rounded-xl border-2 border-dashed border-gray-200 bg-gray-50/50\">\r\n                      <div className=\"w-14 h-14 rounded-2xl bg-amber-100 flex items-center justify-center mb-4\">\r\n                        <FileText className=\"w-7 h-7 text-amber-500\" />\r\n                      </div>\r\n                      <p className=\"text-sm text-gray-600 mb-1\">暂无关联知识库</p>\r\n                      <p className=\"text-xs text-gray-400\">完成 AI 识别后，源文档将自动加入此列表</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </section>\r\n            </div>\r\n          </div>\r\n\r\n        {/* Sticky Footer */}\r\n        <div className=\"bg-white border-t border-gray-100\">\r\n          {/* Validation Error Toast */}\r\n          {validationError && (\r\n            <div className=\"px-8 py-3 bg-red-50 border-b border-red-100 animate-in slide-in-from-top-2\">\r\n              <div className=\"flex items-center gap-2 text-sm text-red-600\">\r\n                <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\" />\r\n                <span className=\"font-medium\">{validationError}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"px-8 py-4 bg-white/80 backdrop-blur-md flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-2 text-sm text-gray-400\">\r\n              <Clock className=\"w-4 h-4\" />\r\n              <span>最后保存: 刚刚</span>\r\n            </div>\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleReset}\r\n                className=\"px-5 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-gray-600 hover:bg-gray-100 transition-all\"\r\n              >\r\n                重置\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                onClick={handleSubmit}\r\n                className=\"px-6 py-2.5 rounded-xl bg-indigo-600 text-sm font-medium text-white hover:bg-indigo-700 shadow-lg shadow-indigo-500/30 hover:shadow-xl hover:shadow-indigo-500/40 transition-all\"\r\n              >\r\n                {mode === \"edit\" ? \"保存修改\" : \"创建服务\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </SheetContent>\r\n\r\n      {/* 替换文档二次确认对话框 */}\r\n      <AlertDialog open={showReplaceConfirm} onOpenChange={setShowReplaceConfirm}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>确认替换文档？</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              替换文档后，下方已编辑过的\"协作规范\"和\"思维链指令\"配置将被新生成的内容覆盖。此操作不可撤销，请确认是否继续。\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>取消</AlertDialogCancel>\r\n            <AlertDialogAction\r\n              onClick={confirmReplaceDocument}\r\n              className=\"bg-red-600 hover:bg-red-700\"\r\n            >\r\n              确认替换\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </Sheet>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4846, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/service-catalog/service-list.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport {\r\n  RefreshCw,\r\n  Plus,\r\n  FileText,\r\n} from \"lucide-react\"\r\nimport { ServiceCard } from \"./service-card\"\r\nimport { CreateServiceDrawer } from \"./create-service-drawer\"\r\n\r\ninterface ServiceData {\r\n  id: string\r\n  title: string\r\n  code: string\r\n  description: string\r\n  icon: typeof FileText\r\n  status: \"active\" | \"draft\"\r\n  sla: string\r\n  category: string\r\n  categoryName: string\r\n}\r\n\r\n// Mock services data - 中文化\r\nconst initialServicesData: ServiceData[] = [\r\n  {\r\n    id: \"1\",\r\n    title: \"工作证明开具\",\r\n    code: \"employment-certificate\",\r\n    description: \"开具在职证明、收入证明等相关人事文件\",\r\n    icon: FileText,\r\n    status: \"active\" as const,\r\n    sla: \"24h\",\r\n    category: \"hr\",\r\n    categoryName: \"人事服务\",\r\n  },\r\n  {\r\n    id: \"2\",\r\n    title: \"请假申请\",\r\n    code: \"request-leave\",\r\n    description: \"各类假期申请处理\",\r\n    icon: FileText,\r\n    status: \"active\" as const,\r\n    sla: \"8h\",\r\n    category: \"hr\",\r\n    categoryName: \"人事服务\",\r\n  },\r\n  {\r\n    id: \"3\",\r\n    title: \"调岗申请\",\r\n    code: \"transfer-request\",\r\n    description: \"内部调岗/转岗申请流程\",\r\n    icon: FileText,\r\n    status: \"active\" as const,\r\n    sla: \"168h\",\r\n    category: \"hr\",\r\n    categoryName: \"人事服务\",\r\n  },\r\n  {\r\n    id: \"4\",\r\n    title: \"设备领用\",\r\n    code: \"equipment-request\",\r\n    description: \"IT设备申领流程\",\r\n    icon: FileText,\r\n    status: \"active\" as const,\r\n    sla: \"48h\",\r\n    category: \"assets\",\r\n    categoryName: \"设备与资产\",\r\n  },\r\n  {\r\n    id: \"5\",\r\n    title: \"权限申请\",\r\n    code: \"access-request\",\r\n    description: \"系统权限申请与审批\",\r\n    icon: FileText,\r\n    status: \"draft\" as const,\r\n    sla: \"4h\",\r\n    category: \"access\",\r\n    categoryName: \"账号与权限管理\",\r\n  },\r\n]\r\n\r\ninterface ServiceListProps {\r\n  selectedCategory: string\r\n}\r\n\r\nexport function ServiceList({ selectedCategory }: ServiceListProps) {\r\n  const [services, setServices] = useState<ServiceData[]>(initialServicesData)\r\n  const [showServiceDrawer, setShowServiceDrawer] = useState(false)\r\n  const [editingService, setEditingService] = useState<ServiceData | null>(null)\r\n\r\n  const filteredServices = services.filter(\r\n    (service) => selectedCategory === \"all\" || service.category === selectedCategory\r\n  )\r\n\r\n  const handleEditService = (service: ServiceData) => {\r\n    setEditingService(service)\r\n    setShowServiceDrawer(true)\r\n  }\r\n\r\n  const handleDeleteService = (serviceId: string) => {\r\n    setServices(services.filter((s) => s.id !== serviceId))\r\n  }\r\n\r\n  const handleAddService = () => {\r\n    setEditingService(null)\r\n    setShowServiceDrawer(true)\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex-1 p-6 overflow-y-auto bg-gray-50/50\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h1 className=\"text-lg font-semibold text-foreground\">服务列表</h1>\r\n          <p className=\"text-sm text-muted-foreground mt-0.5\">{filteredServices.length} 个服务</p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"w-9 h-9 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-white border border-gray-200 transition-all\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4\" />\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleAddService}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700 shadow-sm shadow-indigo-500/30 transition-all\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            添加服务\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\r\n        {filteredServices.map((service) => (\r\n          <ServiceCard \r\n            key={service.id} \r\n            service={service} \r\n            onEdit={() => handleEditService(service)}\r\n            onDelete={() => handleDeleteService(service.id)}\r\n          />\r\n        ))}\r\n      </div>\r\n\r\n      {filteredServices.length === 0 && (\r\n        <div className=\"flex flex-col items-center justify-center py-16 text-center\">\r\n          <div className=\"w-16 h-16 rounded-2xl bg-gray-100 flex items-center justify-center mb-4\">\r\n            <FileText className=\"w-8 h-8 text-gray-400\" />\r\n          </div>\r\n          <h3 className=\"text-lg font-medium text-foreground mb-2\">暂无服务</h3>\r\n          <p className=\"text-sm text-muted-foreground mb-4\">\r\n            该目录下还没有服务，点击添加服务按钮创建\r\n          </p>\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleAddService}\r\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-indigo-600 text-white text-sm font-medium hover:bg-indigo-700 transition-all\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            添加服务\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Service Drawer */}\r\n      <CreateServiceDrawer \r\n        open={showServiceDrawer} \r\n        onOpenChange={setShowServiceDrawer}\r\n        mode={editingService ? \"edit\" : \"create\"}\r\n        editingService={editingService}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAKA;AACA;AATA;;;;;;AAuBA,2BAA2B;AAC3B,MAAM,sBAAqC;IACzC;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,aAAa;QACb,MAAM,8SAAQ;QACd,QAAQ;QACR,KAAK;QACL,UAAU;QACV,cAAc;IAChB;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,aAAa;QACb,MAAM,8SAAQ;QACd,QAAQ;QACR,KAAK;QACL,UAAU;QACV,cAAc;IAChB;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,aAAa;QACb,MAAM,8SAAQ;QACd,QAAQ;QACR,KAAK;QACL,UAAU;QACV,cAAc;IAChB;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,aAAa;QACb,MAAM,8SAAQ;QACd,QAAQ;QACR,KAAK;QACL,UAAU;QACV,cAAc;IAChB;IACA;QACE,IAAI;QACJ,OAAO;QACP,MAAM;QACN,aAAa;QACb,MAAM,8SAAQ;QACd,QAAQ;QACR,KAAK;QACL,UAAU;QACV,cAAc;IAChB;CACD;AAMM,SAAS,YAAY,EAAE,gBAAgB,EAAoB;IAChE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iVAAQ,EAAgB;IACxD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iVAAQ,EAAC;IAC3D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iVAAQ,EAAqB;IAEzE,MAAM,mBAAmB,SAAS,MAAM,CACtC,CAAC,UAAY,qBAAqB,SAAS,QAAQ,QAAQ,KAAK;IAGlE,MAAM,oBAAoB,CAAC;QACzB,kBAAkB;QAClB,qBAAqB;IACvB;IAEA,MAAM,sBAAsB,CAAC;QAC3B,YAAY,SAAS,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAC9C;IAEA,MAAM,mBAAmB;QACvB,kBAAkB;QAClB,qBAAqB;IACvB;IAEA,qBACE,8WAAC;QAAI,WAAU;;0BAEb,8WAAC;gBAAI,WAAU;;kCACb,8WAAC;;0CACC,8WAAC;gCAAG,WAAU;0CAAwC;;;;;;0CACtD,8WAAC;gCAAE,WAAU;;oCAAwC,iBAAiB,MAAM;oCAAC;;;;;;;;;;;;;kCAE/E,8WAAC;wBAAI,WAAU;;0CACb,8WAAC;gCACC,MAAK;gCACL,WAAU;0CAEV,cAAA,8WAAC,iTAAS;oCAAC,WAAU;;;;;;;;;;;0CAEvB,8WAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;;kDAEV,8WAAC,8RAAI;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;0BAOlC,8WAAC;gBAAI,WAAU;0BACZ,iBAAiB,GAAG,CAAC,CAAC,wBACrB,8WAAC,mKAAW;wBAEV,SAAS;wBACT,QAAQ,IAAM,kBAAkB;wBAChC,UAAU,IAAM,oBAAoB,QAAQ,EAAE;uBAHzC,QAAQ,EAAE;;;;;;;;;;YAQpB,iBAAiB,MAAM,KAAK,mBAC3B,8WAAC;gBAAI,WAAU;;kCACb,8WAAC;wBAAI,WAAU;kCACb,cAAA,8WAAC,8SAAQ;4BAAC,WAAU;;;;;;;;;;;kCAEtB,8WAAC;wBAAG,WAAU;kCAA2C;;;;;;kCACzD,8WAAC;wBAAE,WAAU;kCAAqC;;;;;;kCAGlD,8WAAC;wBACC,MAAK;wBACL,SAAS;wBACT,WAAU;;0CAEV,8WAAC,8RAAI;gCAAC,WAAU;;;;;;4BAAY;;;;;;;;;;;;;0BAOlC,8WAAC,uLAAmB;gBAClB,MAAM;gBACN,cAAc;gBACd,MAAM,iBAAiB,SAAS;gBAChC,gBAAgB;;;;;;;;;;;;AAIxB"}},
    {"offset": {"line": 5114, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/ui/dialog.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { XIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',\n          className,\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn('text-lg leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,8WAAC,uRAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;AAEA,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,8WAAC,0RAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,8WAAC,yRAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,8WAAC,wRAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,8WAAC,0RAAuB;QACtB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,8WAAC;QAAa,aAAU;;0BACtB,8WAAC;;;;;0BACD,8WAAC,0RAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,+WACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,8WAAC,wRAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,8WAAC,6RAAK;;;;;0CACN,8WAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,8WAAC,wRAAqB;QACpB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,8WAAC,8RAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 5296, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/components/service-catalog/create-category-modal.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { X, Smile, Image } from \"lucide-react\"\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\ninterface CreateCategoryModalProps {\r\n  open: boolean\r\n  onOpenChange: (open: boolean) => void\r\n  mode?: \"create\" | \"edit\"\r\n  initialValues?: {\r\n    id: string\r\n    name: string\r\n    code: string\r\n    description?: string\r\n    icon?: string\r\n    enabled?: boolean\r\n  } | null\r\n}\r\n\r\nexport function CreateCategoryModal({ \r\n  open, \r\n  onOpenChange, \r\n  mode = \"create\",\r\n  initialValues = null \r\n}: CreateCategoryModalProps) {\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    code: \"\",\r\n    description: \"\",\r\n    icon: \"\",\r\n    enabled: true,\r\n  })\r\n  const [validationError, setValidationError] = useState<string | null>(null)\r\n\r\n  // 当 modal 打开时，如果是编辑模式，填充初始值\r\n  useEffect(() => {\r\n    if (open && mode === \"edit\" && initialValues) {\r\n      setFormData({\r\n        name: initialValues.name,\r\n        code: initialValues.code,\r\n        description: initialValues.description || \"\",\r\n        icon: initialValues.icon || \"\",\r\n        enabled: initialValues.enabled ?? true,\r\n      })\r\n    } else if (open && mode === \"create\") {\r\n      // 创建模式：重置表单\r\n      setFormData({\r\n        name: \"\",\r\n        code: \"\",\r\n        description: \"\",\r\n        icon: \"\",\r\n        enabled: true,\r\n      })\r\n    }\r\n  }, [open, mode, initialValues])\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    \r\n    // 验证必填字段\r\n    if (!formData.name.trim()) {\r\n      setValidationError(\"请输入目录名称\")\r\n      setTimeout(() => setValidationError(null), 3000)\r\n      return\r\n    }\r\n    if (!formData.code.trim()) {\r\n      setValidationError(\"请输入目录编码\")\r\n      setTimeout(() => setValidationError(null), 3000)\r\n      return\r\n    }\r\n    \r\n    if (mode === \"edit\" && initialValues) {\r\n      console.log(\"Update category:\", { id: initialValues.id, ...formData })\r\n    } else {\r\n      console.log(\"Create category:\", formData)\r\n    }\r\n    setValidationError(null)\r\n    onOpenChange(false)\r\n  }\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent\r\n        showCloseButton={false}\r\n        className=\"sm:max-w-[500px] p-0 bg-white backdrop-blur-sm shadow-2xl rounded-2xl border-0 overflow-hidden\"\r\n      >\r\n        {/* Header */}\r\n        <DialogHeader className=\"px-6 pt-6 pb-4 border-b border-gray-100\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <DialogTitle className=\"text-lg font-semibold text-gray-900\">\r\n              {mode === \"edit\" ? \"编辑服务目录\" : \"新建服务目录\"}\r\n            </DialogTitle>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => onOpenChange(false)}\r\n              className=\"w-8 h-8 rounded-lg flex items-center justify-center text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-all\"\r\n            >\r\n              <X className=\"w-5 h-5\" />\r\n            </button>\r\n          </div>\r\n        </DialogHeader>\r\n\r\n        {/* Form Body */}\r\n        <form onSubmit={handleSubmit} className=\"px-6 py-5 space-y-5\">\r\n          {/* 目录名称 */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-gray-700\">\r\n              目录名称 <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              required\r\n              placeholder=\"例如：办公支持\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n            />\r\n          </div>\r\n\r\n          {/* 目录编码 */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-gray-700\">\r\n              目录编码 <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              required\r\n              placeholder=\"唯一标识，如 office-support\"\r\n              value={formData.code}\r\n              onChange={(e) => setFormData({ ...formData, code: e.target.value })}\r\n              disabled={mode === \"edit\"}\r\n              className={cn(\r\n                \"w-full px-4 py-2.5 rounded-xl border border-gray-200 text-sm font-mono placeholder:text-gray-400 placeholder:font-sans focus:outline-none transition-all\",\r\n                mode === \"edit\" \r\n                  ? \"bg-gray-50 text-gray-500 cursor-not-allowed\" \r\n                  : \"focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\r\n              )}\r\n            />\r\n            {mode === \"edit\" && (\r\n              <p className=\"text-xs text-gray-400 flex items-start gap-1\">\r\n                <span className=\"text-amber-500\">⚠️</span>\r\n                <span>编码不可修改</span>\r\n              </p>\r\n            )}\r\n          </div>\r\n\r\n          {/* 描述 */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-gray-700\">\r\n              描述\r\n            </label>\r\n            <textarea\r\n              rows={3}\r\n              placeholder=\"请输入目录描述...\"\r\n              value={formData.description}\r\n              onChange={(e) => setFormData({ ...formData, description: e.target.value })}\r\n              className=\"w-full px-4 py-2.5 rounded-xl border border-gray-200 text-sm placeholder:text-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n            />\r\n          </div>\r\n\r\n          {/* 图标选择器 */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-sm font-medium text-gray-700\">\r\n              图标\r\n            </label>\r\n            <div className=\"flex items-center gap-3\">\r\n              {/* 图标预览 */}\r\n              <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-50 to-purple-50 border border-gray-200 flex items-center justify-center flex-shrink-0\">\r\n                {formData.icon ? (\r\n                  <Image className=\"w-6 h-6 text-indigo-500\" />\r\n                ) : (\r\n                  <Smile className=\"w-6 h-6 text-gray-300\" />\r\n                )}\r\n              </div>\r\n              {/* 输入框 */}\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"请输入图标类名或 URL\"\r\n                value={formData.icon}\r\n                onChange={(e) => setFormData({ ...formData, icon: e.target.value })}\r\n                className=\"flex-1 px-4 py-2.5 rounded-xl border border-gray-200 text-sm placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* 是否启用 - Toggle Switch */}\r\n          <div className=\"flex items-center justify-between py-2\">\r\n            <div>\r\n              <label className=\"text-sm font-medium text-gray-700\">\r\n                是否启用\r\n              </label>\r\n              <p className=\"text-xs text-gray-400 mt-0.5\">启用后该目录将在服务目录中显示</p>\r\n            </div>\r\n            <button\r\n              type=\"button\"\r\n              role=\"switch\"\r\n              aria-checked={formData.enabled}\r\n              onClick={() => setFormData({ ...formData, enabled: !formData.enabled })}\r\n              className={cn(\r\n                \"relative w-11 h-6 rounded-full transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\",\r\n                formData.enabled ? \"bg-indigo-600\" : \"bg-gray-200\"\r\n              )}\r\n            >\r\n              <span\r\n                className={cn(\r\n                  \"absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform duration-200 ease-in-out\",\r\n                  formData.enabled ? \"translate-x-5\" : \"translate-x-0\"\r\n                )}\r\n              />\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        {/* Footer */}\r\n        <div className=\"bg-gray-50/80 border-t border-gray-100\">\r\n          {/* Validation Error Toast */}\r\n          {validationError && (\r\n            <div className=\"px-6 py-3 bg-red-50 border-b border-red-100 animate-in slide-in-from-top-2\">\r\n              <div className=\"flex items-center gap-2 text-sm text-red-600\">\r\n                <div className=\"w-1.5 h-1.5 rounded-full bg-red-500\" />\r\n                <span className=\"font-medium\">{validationError}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"px-6 py-4 flex items-center justify-end gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => onOpenChange(false)}\r\n              className=\"px-5 py-2.5 rounded-xl border border-gray-200 text-sm font-medium text-gray-600 hover:bg-gray-100 transition-all\"\r\n            >\r\n              取消\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              onClick={handleSubmit}\r\n              className=\"px-5 py-2.5 rounded-xl bg-indigo-600 text-sm font-medium text-white hover:bg-indigo-700 shadow-lg shadow-indigo-500/20 hover:shadow-xl hover:shadow-indigo-500/30 transition-all\"\r\n            >\r\n              {mode === \"edit\" ? \"保存修改\" : \"创建目录\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AAMA;AAVA;;;;;;AA0BO,SAAS,oBAAoB,EAClC,IAAI,EACJ,YAAY,EACZ,OAAO,QAAQ,EACf,gBAAgB,IAAI,EACK;IACzB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iVAAQ,EAAC;QACvC,MAAM;QACN,MAAM;QACN,aAAa;QACb,MAAM;QACN,SAAS;IACX;IACA,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iVAAQ,EAAgB;IAEtE,4BAA4B;IAC5B,IAAA,kVAAS,EAAC;QACR,IAAI,QAAQ,SAAS,UAAU,eAAe;YAC5C,YAAY;gBACV,MAAM,cAAc,IAAI;gBACxB,MAAM,cAAc,IAAI;gBACxB,aAAa,cAAc,WAAW,IAAI;gBAC1C,MAAM,cAAc,IAAI,IAAI;gBAC5B,SAAS,cAAc,OAAO,IAAI;YACpC;QACF,OAAO,IAAI,QAAQ,SAAS,UAAU;YACpC,YAAY;YACZ,YAAY;gBACV,MAAM;gBACN,MAAM;gBACN,aAAa;gBACb,MAAM;gBACN,SAAS;YACX;QACF;IACF,GAAG;QAAC;QAAM;QAAM;KAAc;IAE9B,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAEhB,SAAS;QACT,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,IAAI;YACzB,mBAAmB;YACnB,WAAW,IAAM,mBAAmB,OAAO;YAC3C;QACF;QACA,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,IAAI;YACzB,mBAAmB;YACnB,WAAW,IAAM,mBAAmB,OAAO;YAC3C;QACF;QAEA,IAAI,SAAS,UAAU,eAAe;YACpC,QAAQ,GAAG,CAAC,oBAAoB;gBAAE,IAAI,cAAc,EAAE;gBAAE,GAAG,QAAQ;YAAC;QACtE,OAAO;YACL,QAAQ,GAAG,CAAC,oBAAoB;QAClC;QACA,mBAAmB;QACnB,aAAa;IACf;IAEA,qBACE,8WAAC,qIAAM;QAAC,MAAM;QAAM,cAAc;kBAChC,cAAA,8WAAC,4IAAa;YACZ,iBAAiB;YACjB,WAAU;;8BAGV,8WAAC,2IAAY;oBAAC,WAAU;8BACtB,cAAA,8WAAC;wBAAI,WAAU;;0CACb,8WAAC,0IAAW;gCAAC,WAAU;0CACpB,SAAS,SAAS,WAAW;;;;;;0CAEhC,8WAAC;gCACC,MAAK;gCACL,SAAS,IAAM,aAAa;gCAC5B,WAAU;0CAEV,cAAA,8WAAC,qRAAC;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;8BAMnB,8WAAC;oBAAK,UAAU;oBAAc,WAAU;;sCAEtC,8WAAC;4BAAI,WAAU;;8CACb,8WAAC;oCAAM,WAAU;;wCAAoC;sDAC9C,8WAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;8CAEtC,8WAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,aAAY;oCACZ,OAAO,SAAS,IAAI;oCACpB,UAAU,CAAC,IAAM,YAAY;4CAAE,GAAG,QAAQ;4CAAE,MAAM,EAAE,MAAM,CAAC,KAAK;wCAAC;oCACjE,WAAU;;;;;;;;;;;;sCAKd,8WAAC;4BAAI,WAAU;;8CACb,8WAAC;oCAAM,WAAU;;wCAAoC;sDAC9C,8WAAC;4CAAK,WAAU;sDAAe;;;;;;;;;;;;8CAEtC,8WAAC;oCACC,MAAK;oCACL,QAAQ;oCACR,aAAY;oCACZ,OAAO,SAAS,IAAI;oCACpB,UAAU,CAAC,IAAM,YAAY;4CAAE,GAAG,QAAQ;4CAAE,MAAM,EAAE,MAAM,CAAC,KAAK;wCAAC;oCACjE,UAAU,SAAS;oCACnB,WAAW,IAAA,kHAAE,EACX,4JACA,SAAS,SACL,gDACA;;;;;;gCAGP,SAAS,wBACR,8WAAC;oCAAE,WAAU;;sDACX,8WAAC;4CAAK,WAAU;sDAAiB;;;;;;sDACjC,8WAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAMZ,8WAAC;4BAAI,WAAU;;8CACb,8WAAC;oCAAM,WAAU;8CAAoC;;;;;;8CAGrD,8WAAC;oCACC,MAAM;oCACN,aAAY;oCACZ,OAAO,SAAS,WAAW;oCAC3B,UAAU,CAAC,IAAM,YAAY;4CAAE,GAAG,QAAQ;4CAAE,aAAa,EAAE,MAAM,CAAC,KAAK;wCAAC;oCACxE,WAAU;;;;;;;;;;;;sCAKd,8WAAC;4BAAI,WAAU;;8CACb,8WAAC;oCAAM,WAAU;8CAAoC;;;;;;8CAGrD,8WAAC;oCAAI,WAAU;;sDAEb,8WAAC;4CAAI,WAAU;sDACZ,SAAS,IAAI,iBACZ,8WAAC,iSAAK;gDAAC,WAAU;;;;;qEAEjB,8WAAC,iSAAK;gDAAC,WAAU;;;;;;;;;;;sDAIrB,8WAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,OAAO,SAAS,IAAI;4CACpB,UAAU,CAAC,IAAM,YAAY;oDAAE,GAAG,QAAQ;oDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gDAAC;4CACjE,WAAU;;;;;;;;;;;;;;;;;;sCAMhB,8WAAC;4BAAI,WAAU;;8CACb,8WAAC;;sDACC,8WAAC;4CAAM,WAAU;sDAAoC;;;;;;sDAGrD,8WAAC;4CAAE,WAAU;sDAA+B;;;;;;;;;;;;8CAE9C,8WAAC;oCACC,MAAK;oCACL,MAAK;oCACL,gBAAc,SAAS,OAAO;oCAC9B,SAAS,IAAM,YAAY;4CAAE,GAAG,QAAQ;4CAAE,SAAS,CAAC,SAAS,OAAO;wCAAC;oCACrE,WAAW,IAAA,kHAAE,EACX,uJACA,SAAS,OAAO,GAAG,kBAAkB;8CAGvC,cAAA,8WAAC;wCACC,WAAW,IAAA,kHAAE,EACX,mHACA,SAAS,OAAO,GAAG,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;8BAQ/C,8WAAC;oBAAI,WAAU;;wBAEZ,iCACC,8WAAC;4BAAI,WAAU;sCACb,cAAA,8WAAC;gCAAI,WAAU;;kDACb,8WAAC;wCAAI,WAAU;;;;;;kDACf,8WAAC;wCAAK,WAAU;kDAAe;;;;;;;;;;;;;;;;;sCAKrC,8WAAC;4BAAI,WAAU;;8CACb,8WAAC;oCACC,MAAK;oCACL,SAAS,IAAM,aAAa;oCAC5B,WAAU;8CACX;;;;;;8CAGD,8WAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CAET,SAAS,SAAS,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO1C"}},
    {"offset": {"line": 5767, "column": 0}, "map": {"version":3,"sources":["file:///D:/%E8%AE%BE%E8%AE%A1/bkl-ite-cloud-redesign/app/service-catalog/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Home, Bell } from \"lucide-react\"\nimport { GlobalSidebar } from \"@/components/workbench/global-sidebar\"\nimport { CategorySidebar } from \"@/components/service-catalog/category-sidebar\"\nimport { ServiceList } from \"@/components/service-catalog/service-list\"\nimport { CreateCategoryModal } from \"@/components/service-catalog/create-category-modal\"\n\nexport default function ServiceCatalogPage() {\n  const [selectedCategory, setSelectedCategory] = useState(\"hr\")\n  const [showCategoryModal, setShowCategoryModal] = useState(false)\n  const [categoryModalMode, setCategoryModalMode] = useState<\"create\" | \"edit\">(\"create\")\n  const [editingCategory, setEditingCategory] = useState<any>(null)\n\n  const handleAddCategory = () => {\n    setCategoryModalMode(\"create\")\n    setEditingCategory(null)\n    setShowCategoryModal(true)\n  }\n\n  const handleEditCategory = (category: any) => {\n    setCategoryModalMode(\"edit\")\n    setEditingCategory(category)\n    setShowCategoryModal(true)\n  }\n\n  const handleDeleteCategory = (id: string) => {\n    console.log(\"Delete category:\", id)\n    // TODO: 实现删除逻辑\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-white\">\n      <GlobalSidebar currentPage=\"service-catalog\" />\n      \n      {/* Main Content */}\n      <main className=\"flex-1 ml-[200px] flex flex-col\">\n        {/* Top Header */}\n        <header className=\"h-14 px-6 flex items-center justify-between border-b border-gray-100 bg-white sticky top-0 z-30\">\n          <div className=\"flex items-center gap-2\">\n            <Home className=\"w-5 h-5 text-gray-400\" />\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <button\n              type=\"button\"\n              className=\"relative p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-50 transition-all\"\n            >\n              <Bell className=\"w-5 h-5\" />\n              <span className=\"absolute top-1 right-1 w-2 h-2 rounded-full bg-red-500\" />\n            </button>\n          </div>\n        </header>\n\n        {/* Content Area */}\n        <div className=\"flex-1 flex\">\n          {/* Category Sidebar */}\n          <div className=\"w-[240px] flex-shrink-0 border-r border-gray-100\">\n            <CategorySidebar\n              selectedCategory={selectedCategory}\n              onSelectCategory={setSelectedCategory}\n              onAddCategory={handleAddCategory}\n              onEditCategory={handleEditCategory}\n              onDeleteCategory={handleDeleteCategory}\n            />\n          </div>\n\n          {/* Service List */}\n          <ServiceList selectedCategory={selectedCategory} />\n        </div>\n      </main>\n\n      {/* Create/Edit Category Modal */}\n      <CreateCategoryModal \n        open={showCategoryModal} \n        onOpenChange={setShowCategoryModal}\n        mode={categoryModalMode}\n        initialValues={editingCategory}\n      />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS;IACtB,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iVAAQ,EAAC;IACzD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iVAAQ,EAAC;IAC3D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iVAAQ,EAAoB;IAC9E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iVAAQ,EAAM;IAE5D,MAAM,oBAAoB;QACxB,qBAAqB;QACrB,mBAAmB;QACnB,qBAAqB;IACvB;IAEA,MAAM,qBAAqB,CAAC;QAC1B,qBAAqB;QACrB,mBAAmB;QACnB,qBAAqB;IACvB;IAEA,MAAM,uBAAuB,CAAC;QAC5B,QAAQ,GAAG,CAAC,oBAAoB;IAChC,eAAe;IACjB;IAEA,qBACE,8WAAC;QAAI,WAAU;;0BACb,8WAAC,8JAAa;gBAAC,aAAY;;;;;;0BAG3B,8WAAC;gBAAK,WAAU;;kCAEd,8WAAC;wBAAO,WAAU;;0CAChB,8WAAC;gCAAI,WAAU;0CACb,cAAA,8WAAC,+RAAI;oCAAC,WAAU;;;;;;;;;;;0CAElB,8WAAC;gCAAI,WAAU;0CACb,cAAA,8WAAC;oCACC,MAAK;oCACL,WAAU;;sDAEV,8WAAC,8RAAI;4CAAC,WAAU;;;;;;sDAChB,8WAAC;4CAAK,WAAU;;;;;;;;;;;;;;;;;;;;;;;kCAMtB,8WAAC;wBAAI,WAAU;;0CAEb,8WAAC;gCAAI,WAAU;0CACb,cAAA,8WAAC,2KAAe;oCACd,kBAAkB;oCAClB,kBAAkB;oCAClB,eAAe;oCACf,gBAAgB;oCAChB,kBAAkB;;;;;;;;;;;0CAKtB,8WAAC,mKAAW;gCAAC,kBAAkB;;;;;;;;;;;;;;;;;;0BAKnC,8WAAC,uLAAmB;gBAClB,MAAM;gBACN,cAAc;gBACd,MAAM;gBACN,eAAe;;;;;;;;;;;;AAIvB"}}]
}